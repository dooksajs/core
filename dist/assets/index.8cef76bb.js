function X(){import("data:text/javascript,")}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();function q(t,e,s,n,i,o="",a=""){if(e==null){const d=s.substring(0,s.length-n.length)+o+i+a;throw Error(`${t}: "${d}" contains ${e}`)}}function B(t,e,s="",n=""){try{let i="";if(q(t,e,s,i,n),typeof e=="object"){let o=".",a="";Array.isArray(e)&&(o="[",a="]");for(const d in e)if(Object.prototype.hasOwnProperty.call(e,d)){const c=e[d],r=o+d+a;q(t,c,s,i,d,o,a),i+=r,s+=r,typeof c=="object"&&B(t,c,s,d)}}}catch(i){console.error(i)}}function Q(t="",e){return new Proxy(e,{set(s,n,i){return B(t,i,n),Reflect.set(...arguments)}})}function M(t,e=[],s){let n={name:t.name,version:t.version};this.name=t.name,this.version=t.version,t.data&&(n={...n,...t.data}),s&&(n=Q(t.name,n));for(let i=0;i<e.length;i++){const o=e[i];o.scope&&o.scope.includes(t.name)&&(n[o.name]=o.value),o.name==="isDev"&&o.value?(n.isDev=!0,t.name!=="dsDevTool"&&n.$action("dsDevTool/set",{_context:n,plugin:t})):n[o.name]=o.value}if(t.dependencies&&(this.dependencies=t.dependencies,n.dependencies=t.dependencies),t.methods){const i={};for(const o in t.methods)if(Object.hasOwnProperty.call(t.methods,o)){const a=t.methods[o];n[o]=a,o.charAt(0)!=="_"&&(i[o]=a.bind(n))}this.methods=i}if(t.tokens){const i={};for(const o in t.tokens)if(Object.hasOwnProperty.call(t.tokens,o)){const a=t.tokens[o];n[o]=a,i[o]=a.bind(n)}this.tokens=i}if(t.components){for(let i=0;i<t.components.length;i++){const o=t.components[i];o.lazy&&(o.isLazy=!0)}this.components=t.components}t.setup&&(this.setup=t.setup.bind(n))}M.prototype.init=function(t){if(this.setup)return this.setup(t)};const P={name:"dsMetadata",version:1,data:{appId:"",language:"default",theme:""},methods:{getLanguage(){return this.language},getTheme(){return this.theme},setAppId(t){this.appId=t},setLanguage(t){this.language=t},setTheme(t){this.theme=t}}},V={name:"dsAction",version:1,dependencies:[{name:"dsParameter",version:1}],data:{actions:{},sequence:{},conditions:{}},methods:{dispatch({dsActionId:t,payload:e}){const s=this.sequence[t];!s||this._dispatch({sequenceId:t,actions:s.actions,conditions:s.conditions||{},payload:e})},set({dsActionItems:t,dsActionConditions:e,dsActionSequence:s}){t&&(this.actions={...this.actions,...t}),e&&(this.conditions={...this.conditions,...e}),s&&(this.sequence[s.id]={actions:s.actions},s.conditions&&(this.sequence[s.id].conditions=s.conditions))},_action({instance:t,name:e,type:s,computedParams:n,paramType:i,params:o,callback:a={},entry:d,parentEntry:c}){return n&&(o=this.$method("dsParameter/process",{dsActionInstance:t,dsActionEntry:d,dsActionEntryParent:c,dsParameterType:i,dsParameterItem:o})),this["_process/"+s]({name:e,params:o,callback:a})},_createActions(t,e){return{entry:t,...e}},_compare(t,{instanceId:e,parentItemId:s,data:n}){let i=!1,o=!1,a=[];for(let d=0;d<t.length;d++){const c=t[d],r=c.name;if(r==="&&"||r==="||")a=[...a,r],o=!0;else{const h=[],u=c.values.length-1;for(let l=0;l<c.values.length;l++){const p=c.values[l];let m=p.value;Object.hasOwnProperty.call(p,"entry")&&(m=this._action({instanceId:e,entry:p.entry,parentItemId:s,paramItems:c.params,data:n,lastItem:u===l,...c.items[p.entry]})),h.push(m)}const g=this.$method("dsOperators/eval",{name:r,values:h});a.push(g)}}if(o)i=this.$method("dsOperators/compare",a);else for(let d=0;d<a.length;d++)if(i=!0,!a[d]){i=!1;break}return i},_dispatch({sequenceId:t,instance:e={iteration:{},results:{}},parentEntry:s,actions:n={},conditions:i={},payload:o,results:a={}}){let d=!0;e.payload=o,s&&(e.results[s]=a),i.length&&(d=this._compare(i,{parentEntry:s,instance:e}));for(let c=0;c<n.entry.length;c++){const r=n.entry[c],h=n[r];let u=h;if(h._$id&&(u=this.actions[h._$id]),h.conditions&&(d=this._compare(h.conditions,{parentEntry:s,instance:e})),Object.hasOwnProperty.call(u,"when")&&d!==u.when)return;if(Object.hasOwnProperty.call(u,"value"))return[u.value];const g={onSuccess:null,onError:null};Object.hasOwnProperty.call(h,"onSuccess")&&(g.onSuccess={params:{parentEntry:r,actions:{entry:h.onSuccess,...n},instance:e},method:this._dispatch.bind(this)}),Object.hasOwnProperty.call(h,"onError")&&(g.onError={params:{parentEntry:r,actions:{entry:h.onError,...n},instance:e},method:this._dispatch.bind(this)});const l=this._action({instance:e,entry:r,actions:n,conditions:h.conditions,parentEntry:s,name:u.name,type:u.type,computedParams:u._$computedParams,paramType:u.paramType,params:u.params,callback:g});l&&(a[r]=l)}return a},_onEvent(t,e,s){let n=s;e&&(n={...e,result:s}),t(n)},"_process/value"({params:t,callback:e}){const s=e.onSuccess,n=e.onError,i=t;return s&&this._onEvent(s.method||s,s.params,i),n&&this._onEvent(n.method||n,n.params),i},"_process/action"({name:t,params:e,callback:s}){this.$action(t,e,s)},"_process/method"({name:t,params:e,callback:s}){const n=s.onSuccess,i=this.$method(t,e);n&&this._onEvent(n.method||n,n.params,i)}}},x={name:"dsWidget",version:1,dependencies:[{name:"dsView",version:1},{name:"dsContent",version:1}],data:{entry:{},content:{},loaded:{},view:{},templates:{},layout:{},sections:{},sectionParent:{},sectionView:{},attached:{section:{},instance:{},content:{}},render:{section:{},instance:{},content:[]}},methods:{attach({type:t,id:e}){this.attached[t][e]=!0},create({dsWidgetSectionId:t,dsViewId:e,prefixId:s,language:n}){const[i,o]=this._getSections(t,s);let a=this._getSectionView(o);this.sectionView[t]=e;for(let d=0;d<i.length;d++){const c=i[d];a=this._getInstanceView(a,c.layout),this._createInstance(o,c.instanceId,c.groupId,c.layout,a,e,s,n)}this.attach({type:"section",id:o})},getContentItem({dsWidgetSectionId:t,dsWidgetInstanceId:e,dsWidgetPrefixId:s,contentIndex:n,dsWidgetView:i}){i||(i=this._getSectionView(t));const o=t+e+"_"+i;if(this.content[s]&&this.content[s][o])return this.content[s][o][n];{const a=this.sections[t].find(d=>d.instanceId===e);if(!a.layout[i])return this.getContentItem({dsWidgetSectionId:t,dsWidgetInstanceId:e,dsWidgetPrefixId:s,contentIndex:n,view:"default",head:!1});if(this._templateExists(t,e,a.layout,i))this._loadTemplate(t,e,a.groupId,a.layout,s,i,()=>this.getContentItem({dsWidgetSectionId:t,dsWidgetInstanceId:e,dsWidgetPrefixId:s,contentIndex:n,head:!1}));else return this.getContentItem({dsWidgetSectionId:t,dsWidgetInstanceId:e,dsWidgetPrefixId:s,contentIndex:n,head:!1})}},getEntry(t){return this.entry[t]},getLayout(t){return this.layout[t]},getSectionParentId(t){return this.sectionParent[t]},insert({dsWidgetSectionId:t,dsWidgetItem:e,index:s}){if(this.sections[t]){e.groupId=this.$method("dsUtilities/generateId"),e.instanceId=this.$method("dsUtilities/generateId"),Number.isNaN(s)?this.sections[t].push(e):this.sections[t].splice(s,0,e);let n=this._getSectionView(t);n=this._getInstanceView(n,e.layout);const i=this.$method("dsRouter/getCurrentId"),o=this.sectionView[t];this._createInstance(t,e.instanceId,e.groupId,e.layout,n,o,i)}},remove({dsWidgetSectionId:t,dsWidgetPrefixId:e=""}){const[s,n]=this._getSections(t,e);let i=this._getSectionView(n);for(let o=0;o<s.length;o++){const a=s[o];let d=a.layout[i];a.layout[i]||(d=a.layout.default,i="default"),this._detachInstance(n,a.instanceId,d.id,i,e)}this._detachItem("section",t)},set({dsPageId:t,payload:e}){e.sections&&this.setSections(e.sections),e.content&&this.setContent({dsPageId:t,items:e.content}),e.loaded&&(this.loaded={...this.loaded,...e.loaded}),e.entry&&(this.entry={...this.entry,...e.entry}),e.layout&&(this.layout={...this.layout,...e.layout}),e.templates&&(this.templates={...this.templates,...e.templates})},setContent({dsPageId:t,items:e}){this.content[t]={...this.content[t],...e}},setSections(t){this.sections={...this.sections,...t}},setLayout(t){this.layout={...this.layout,...t}},setLoaded({id:t,value:e}){this.loaded[t]=e},setSectionParentId({dsWidgetSectionId:t,dsWidgetSectionParentId:e}){this.sectionParent[t]=e},update({dsWidgetSectionId:t,dsWidgetPrefixId:e,dsWidgetNextSectionId:s,dsWidgetNextPrefixId:n,dsViewId:i}){const o=this.$method("dsMetadata/getLang");i||(i=this.sectionView[t]||this.$method("dsView/getRootViewId"));const[a,d]=this._getSections(t,e),[c,r]=this._getSections(s,n),h=c.length>a.length?c.length:a.length,u=[],g=[];for(let l=0;l<h;l++){const p=a[l],m=c[l];let f=this._getSectionView(d);if(m){const I=this._getSectionView(r);if(p){f=this._getInstanceView(f,p.layout);const y=p.layout[f];g.push({sectionId:d,instanceId:p.instanceId,layout:y,view:f}),u.push({instanceId:m.instanceId,groupId:m.groupId,dsViewId:i,layout:m.layout,view:I})}else u.push({sectionId:r,instanceId:m.instanceId,dsViewId:i,layout:m.layout,view:I})}else{f=this._getInstanceView(f,p.layout);const I=p.layout[f];g.push({sectionId:d,instanceId:p.instanceId,layout:I,view:f})}}if(g.length){for(let l=0;l<g.length;l++){const p=g[l];this._detachInstance(p.sectionId,p.instanceId,p.layout.id,p.view,e)}this._detachItem("section",d)}if(u.length){this.attach({type:"section",id:r});for(let l=0;l<u.length;l++){const p=u[l],m=p.layout[p.view]?p.view:"default";this._createInstance(r,p.instanceId,p.groupId,p.layout,m,p.dsViewId,n,o)}}},_createInstance(t,e,s,n,i,o,a,d){this._getAttached("instance",e)||(this._templateExists(t,e,n,i)?this._renderLayout(n[i].id,t,e,a,d,i,o):this._loadTemplate(t,e,s,n,a,i,c=>{this._renderLayout(c,t,e,a,d,i,o)}))},_detachInstance(t,e,s,n,i){const o=this.$method("dsLayout/getComponents",{dsWidgetInstanceId:e,dsWidgetView:n});for(let a=0;a<o.length;a++){const d=o[a];if(Object.prototype.hasOwnProperty.call(d,"contentIndex")){const c=this.getContentItem({dsWidgetSectionId:t,dsWidgetInstanceId:e,dsWidgetPrefixId:i,contentIndex:d.contentIndex});if(this.$method("dsContent/getType",c)[0]==="section"){const r=this.$method("dsContent/getValue",{dsContentId:c});this.remove({dsWidgetSectionId:r,dsWidgetPrefixId:i})}this._detachItem("content",c)}d.dsViewId&&this.$method("dsView/remove",d.dsViewId)}this._detachItem("instance",e)},_getAttached(t,e){return this.attached[t][e]},_detachItem(t,e){this.attached[t][e]&&(this.attached[t][e]=!1)},_getLayoutId(t,e,s="default"){const n=this.sections[t]||[];for(let i=0;i<n.length;i++){const o=n[i];if(o.instanceId===e)return o.layout[s]||o.layout.default}},_getContent(t){return this.content[t]},_getRenderQueue(t){const e={section:{},instance:{},content:[]};for(const s in t)if(Object.prototype.hasOwnProperty.bind(t,s)){const n=s.slice(0,23);if(!this.attached.section[n])e.section[n]=!0;else{const i=s.slice(23,46);if(!this.attached.instance[i])e.instance[i]=!0;else for(let o=0;o<t[s].length;o++){const a=t[s][o];this.attached.content[a]||e.content.push([n,i,o,a])}}}return e},_getItemByInstanceId(t,e,s){const[n,i]=this._getSections(t,e);for(let o=0;o<n.length;o++)if(n[o].instanceId===s)return[n[o],i]},_getSections(t,e){const s=e+"_"+t;return this.sections[s]?[this.sections[s],s,!0]:[this.sections[t]||[],t,!1]},_getSectionView(t){return this.view[t]||"default"},_getInstanceView(t,e){return e[t]?t:"default"},_loadTemplate(t,e,s,n,i,o,a){const d=this._getContent(i)[t+"_"+e+"_default"]||[],c=this.templates[n[o].modifierId];this.$action("dsTemplate/create",{id:n[o].templateId,sectionId:t,instanceId:e,groupId:s,defaultContent:d,modifiers:c,view:o,head:!0},{onSuccess:r=>{a(r[1])},onError:r=>console.log(r)})},_renderLayout(t,e,s,n,i,o,a){this.$method("dsLayout/render",{dsLayoutId:t,dsWidgetSectionId:e,dsWidgetInstanceId:s,dsWidgetPrefixId:n,lang:i,view:o,dsViewId:a}),this.attach({type:"instance",id:s})},_templateExists(t,e,s,n){let i=t+e+"_"+n;return!this.loaded[i]&&!s[n]&&(i=t+e+"_default",n="default"),!!this.loaded[i]}}},$={name:"dsOperator",version:1,data:{operators:{"==":t=>t[0]===t[1],"!=":t=>t[0]!==t[1],">":t=>t[0]>t[1],">=":t=>t[0]>=t[1],"<":t=>t[0]<t[1],"<=":t=>t[0]<=t[1],"!":t=>!t[0],"!!":t=>!!t[0],"%":t=>t[0]%t[1],"++x":t=>++t[0],"x++":t=>t[0]++,"--x":t=>--t[0],"x--":t=>t[0]--,"-":t=>t[0]-t[1],"+":t=>t[0]+t[1],"*":t=>t[0]*t[1],"**":t=>t[0]**t[1]}},methods:{eval({name:t,values:e}){return this.operators[t](e)},compare(t){let e=!1;for(let s=0;s<t.length;s++){const n=t[s];if(n==="&&")if(t[s-1]&&t[s+1])e=!0;else break;if(n==="||")if(t[s-1]||t[s+1])e=!0;else break}return e},arrayRemove({list:t,items:e}){const s=[];for(let n=0;n<t.length;n++){let i=!1;for(let o=0;o<e.length;o++)if(n===e[o]){i=!0;break}i||s.push(t[n])}return s},arrayNextKeyValue({list:t,key:e,index:s=0}){const n=t[s][e];for(let i=s;i<t.length;i++)if(t[i][e]!==n)return[t[i][e],i];return[n,s]},arrayPrevKeyValue({list:t,key:e,index:s=0}){const n=t[s][e];for(let i=s;i>=0;i--)if(t[i][e]!==n)return[t[i][e],i];return[n,s]},arrayFindByKeyValue({list:t,key:e,valueIndex:s}){const n=s[0],i=s[1]||0,o=d=>t[d]&&t[d][e]===n,a=[];for(let d=i;d<t.length;d++)if(t[d][e]===n){const c=d+1;if(a.length){if(!o(c))return a.push(d),a}else{let r=d-1;if(i&&o(r)){for(;o(r);)r--;if(a.push(r+1),!o(c))return a.push(d),a}else if(a.push(d),!o(c)||c===t.length)return a.push(d),a}}},arrayMove({list:t,items:e,index:s}){const n=e.length;let i=s-(n-1);if(i>t.length-1||i<0&&s<0)return;i<=0&&s>=0&&(i=s);const o=[];for(let r=0;r<n;r++)o.push(t[e[r]]);e.sort((r,h)=>r-h);const a=t;let d=1;for(let r=0;r<n;r++){a.splice(e[r],1);const h=r+1;h<n&&(e[h]=e[h]-d,++d)}const c=a.splice(i);return a.concat(o,c)},arrayMerge({list:t,items:e,flat:s}){let n=0;e.sort((i,o)=>i._$index-o._$index);for(let i=0;i<e.length;i++){const o=e[i],a=o._$index+n;delete o._$index;const d=[o],c=t.splice(a);t=t.concat(d,c),++n}return s&&(t=t.flat(s)),t}}},O={name:"dsEvent",version:1,dependencies:[{name:"dsAction",version:1}],data:{listeners:{}},methods:{addListener({dsEventId:t,dsEventOn:e,dsActionId:s}){const n=this._id(t,e);this.listeners[n]?this.listeners[n].push(s):this.listeners[n]=[s]},emit({dsEventId:t,dsEventOn:e,payload:s}){const n=this._id(t,e),i=this._getListener(n);for(let o=0;o<i.length;o++){const a=i[o];this.$method("dsAction/dispatch",{dsActionId:a,payload:s})}},removeListener({dsEventId:t,dsEventOn:e,dsActionId:s}){const n=this._id(t,e),i=this._getListener(n);if(i.length){const o=[];for(let a=0;a<i.length;a++)i[a]!==s&&o.push(i[a]);o.length?this.listeners[n]=o:delete this.listeners[n]}},set(t){this.listeners={...this.listeners,...t}},_getListener(t){var e;return(e=this.listeners[t])!=null?e:[]},_id(t,e){return t+"_"+e}}},E={name:"dsParameter",version:1,data:{items:{},usedBy:{},instance:{}},methods:{process({dsActionInstance:t,dsActionEntry:e,dsActionEntryParent:s,dsParameterType:n,dsParameterItem:i}){return t.entry=e,t.parentEntry=s,this["_process/data/"+n](i,t)},set(t){this.items={...this.items,...t}},setUsedBy(t){for(const e in t)this.usedBy[e]={...this.usedBy[e],...t[e]}},_arrayTransform(t,e){const s=t.map,n=t.flat;let i=[],o=t.list;o._$computed&&(o=this._get(o,e));for(let a=0;a<o.length;a++){const d=o[a],c=[];for(let r=0;r<s.length;r++){const h={};for(let u=0;u<s[r].length;u++){const g=s[r][u][0],l=s[r][u][1];if(d[l])h[g]=d[l];else if(Object.hasOwnProperty.call(l,"value"))h[g]=l.value;else if(Object.hasOwnProperty.call(l,"key")){const p=l.key.split(".");let m=d;for(let f=0;f<p.length;f++){const I=p[f];m[I]&&(m=m[I])}h[g]=m}else Object.hasOwnProperty.call(l,"index")?h[g]=a:(e.iteration={...d,_$index:a},h[g]=this._get(l,e))}t.onIteration&&(e.iteration={...h,_$index:a},this.$method("dsAction/dispatch",{...t.onIteration,dsActionId:e.dsActionId,payload:e})),c.push(h)}i.push(c)}return n&&(i=i.flat(n)),i},_eval(t,e,s){for(let n=0;n<t.length;n++){const i=t[n],o=this._processValues(i.values,e);s+=this.$method("dsOperator/eval",{name:i.name,values:o})}return s},_evalBoolean(t,e){return!!this._eval(t,e,!1)},_evalNumber(t,e){return this._eval(t,e,0)},_evalString(t,e){return this._eval(t,e,"")},_get(t,e){if(!t._$computed&&!t._$computedParams&&!t._$id)return t;if(t=this._getParam(t),t._$computedParams)return this.process({...t,parentEntry:e.parentEntry,entry:e.entry,instance:e});const s=this._getParam(t.params);return this["_process/"+t.name](s,e)},_getParam(t){return t&&t._$id?this.items[t._$id]:t},_getValue(t,e){if(Object.hasOwnProperty.call(e,t))return e[t];if(Object.hasOwnProperty.call(t,"value"))return e;if(Object.hasOwnProperty.call(t,"key")){const n=t.key.split(".");let i=e;for(let o=0;o<n.length;o++){const a=n[o];if(Object.hasOwnProperty.call(e,a))i=e[a];else return i}return i}if(Object.hasOwnProperty.call(t,"index"))return e[t.index];if(Object.hasOwnProperty.call(t,"indexes")){const n=[];for(let i=0;i<t.indexes.length;i++){const o=t[i];n.push(e[o])}return n}const s={};for(let n=0;n<t.length;n++){const i=t[n];s[i]=e[i]}return s},_processValues(t,e){const s=[];for(let n=0;n<t.length;n++){const i=t[n];i.value?s.push(i.value):s.push(this._get(i,e))}return s},_processVariables(t,e){const s={};for(let n=0;n<t.length;n++){const i=t[n][0],o=t[n][1];o.value?s[i]=o.value:s[i]=this._get(o,e)}return s},"_process/getter/method"(t,e){let s;t.params&&(s=this._get(this._getParam(t.params),e));const n=this.$method(t.name,s);return t.return?this._getValue(t.return,n):n},"_process/getter/value"(t,e){return t?this._getValue(t,e.payload):e.payload},"_process/getter/iteration/value"(t,e){const s=e.payload.iteration;return t?this._getValue(t,{...s}):s},"_process/getter/parent/value"(t,e){let s=e.parentEntry;t._$entry&&(s=t._$entry);const n=e.results[s];if(Object.hasOwnProperty.call(n,t))return n[t];if(Object.hasOwnProperty.call(t,"value"))return n;if(Object.hasOwnProperty.call(t,"key")){const i=t.key.split(".");let o=n;for(let a=0;a<i.length;a++){const d=i[a];if(o[d])o=o[d];else return o}}},"_process/getter/parent/array"(t,e){const s=[];let n=e.parentEntry;t._$entry&&(n=t._$entry);const i=e.results[n];for(let o=0;o<t.indexes.length;o++){const a=t[o];s.push(i[a])}return s},"_process/getter/parent/object"(t,e){const s={};let n=e.parentEntry;t._$entry&&(n=t._$entry);const i=e.results[n];for(let o=0;o<t.keys.length;o++){const a=t[o],d=a.split(".");let c=i;for(let r=0;r<d.length;r++){const h=d[r];c[h]&&(c=c[h])}s[a]=c}return s},"_process/data/array"(t,e){const s=[];for(let n=0;n<t.length;n++)s.push(this._get(t[n],e));return s},"_process/data/object"(t,e){const s={};for(let n=0;n<t.length;n++){const i=t[n];s[i[0]]=this._get(i[1],e)}return s},"_process/data/value"(t,e){return this._get(t,e)}}},b={name:"dsRouter",version:1,dependencies:[{name:"dsEvent",version:1}],data:{currentPath:"",state:{},searchParams:!1,items:{}},setup(){this.currentPath=this.currentPathname(),window.addEventListener("popstate",t=>{this._update(this.currentPath,this.currentPathname(),e=>{this.$method("dsPage/updateDOM",e),this.$action("dsEvent/emit",{dsEventId:this.getCurrentId(),dsEventOn:"dsRouter/navigate",payload:e})})})},methods:{getCurrentId(){const t=this.currentPathname();return this.items[t]},currentPathname(){return window.location.pathname},setPath({pageId:t,path:e}){this.items[e]=t},navigate(t){this._update(this.currentPathname(),t,e=>{window.history.pushState(e,"",t),this.currentPath=this.currentPathname(),this.$method("dsPage/updateDOM",e),this.$action("dsEvent/emit",{dsEventId:this.getCurrentId(),dsEventOn:"dsRouter/navigate",payload:e})})},cleanPath(t){return t.toString().trim().toLocaleLowerCase("en-US").replace(/[_,:;]/gi,"-").replace(/\s+/g,"-").replace(/[+]/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-")},_update(t,e,s=()=>{}){const n={nextPath:e,prevPath:t,nextId:this.items[e],prevId:this.items[t]};this.currentPath=this.currentPathname(),n.nextId?s(n):this.$action("dsPage/getOneByPath",{dsPagePath:this.cleanPath(e)},{onSuccess:i=>{n.nextId=i.id,this.$method("dsPage/set",i),s(n)}})}}},U="modulepreload",H=function(t){return"/"+t},D={},v=function(e,s,n){if(!s||s.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(s.map(o=>{if(o=H(o),o in D)return;D[o]=!0;const a=o.endsWith(".css"),d=a?'[rel="stylesheet"]':"";if(!!n)for(let h=i.length-1;h>=0;h--){const u=i[h];if(u.href===o&&(!a||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${d}`))return;const r=document.createElement("link");if(r.rel=a?"stylesheet":U,a||(r.as="script",r.crossOrigin=""),r.href=o,document.head.appendChild(r),a)return new Promise((h,u)=>{r.addEventListener("load",h),r.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())},C={name:"dsComponent",version:1,data:{items:{}},components:[{name:"button",type:"button",events:["click"]},{name:"a",type:"link",set:{type:"attribute",value:"href"},get:{type:"attribute",value:"href"},events:["click","hover"]},{name:"img",type:"image",set:{type:"attribute",value:[{name:"src",key:"src"},{name:"alt",key:"alt"}]},get:{type:"attribute",value:[{name:"src",key:"src"},{name:"alt",key:"alt"}]},events:["click"]},{name:"div",type:"html",set:{type:"setter",value:"innerHTML"},events:["click"]},{name:"input",type:"text",events:["input"],get:{type:"getter",value:"value"},set:{type:"setter",value:"value"}},{name:"#text",type:"text",get:{type:"getter",value:[{name:"textContent",key:"text"}]}},{name:"iconify-icon",lazy:()=>v(()=>import("./iconify-icon.f0a3399f.ffd89cc4.js"),[]),set:[{type:"attribute",value:"icon"}],get:[{type:"attribute",value:"icon"}]}],methods:{get({dsComponentId:t,dsComponentModifierId:e}){const s=this.items[t];if(s.id==="text")return{textNode:!0};const n=this.$component(s.id);if(document.createElement(s.id).constructor.name!=="HTMLUnknownElement"||n.isLazy)return{tag:s.id,attributes:s.attributes}},set(t){this.items={...this.items,...t}}}},W={name:"dsLayout",version:1,data:{metadata:{},event:{},items:{},head:{},components:{},modifiers:{}},methods:{getComponents({dsWidgetInstanceId:t,dsWidgetView:e="default"}){return this.components[e+t]},render({dsLayoutId:t,dsWidgetSectionId:e,dsWidgetInstanceId:s,dsWidgetView:n="default",dsViewId:i="appElement",dsWidgetPrefixId:o,language:a="default"}){let d=this.getComponents({dsWidgetInstanceId:s,dsWidgetView:n});if(d)for(let c=0;c<d.length;c++){const r=d[c];this._attachComponent(d,r,e,s,n,i,o,a)}else{const c=this._getItem(t),r=this._getHead(t),h=this._getEvent(t);d=this._create(t,c,r,c,h,e,s,i,o,a,n);for(let u=0;u<d.length;u++){const g=d[u];this._attachComponent(d,g,e,s,n,i,o,a)}this._setComponents(s,d,n)}},setHead(t){this.head={...this.head,...t}},setModifiers(t){this.modifiers={...this.modifiers,...t}},setItems(t){this.items={...this.items,...t}},_attachComponent(t,e,s,n,i,o,a,d){let c=o;if(e.viewId&&(o=isNaN(e.parentIndex)?o:t[e.parentIndex].viewId,c=e.viewId,this.$method("dsView/append",{dsViewId:e.viewId,dsViewParentId:o})),!isNaN(e.contentIndex)){const r=this.$method("dsWidget/getContentItem",{dsWidgetSectionId:s,dsWidgetInstanceId:n,dsWidgetPrefixId:a,dsViewId:o,dsWidgetView:i,contentIndex:e.contentIndex});if(this.$method("dsContent/getType",r)[0]==="section"){const h=this.$method("dsContent/getValue",r);this.$method("dsWidget/create",{dsWidgetSectionId:s,dsViewId:o,dsWidgetPrefixId:a,language:d,dsWidgetView:i}),this.$method("dsWidget/setSectionParentId",{dsWidgetSectionId:h,dsWidgetSectionParentId:s})}else this.$method("dsContent/attachView",{dsContentId:r,dsViewId:c});this.$method("dsWidget/attach",{type:"content",id:r})}},_create(t,e,s,n,i,o,a,d,c,r,h,u=[],g,l=0){let p=[];if(!u.length){for(let m=0;m<e.length;m++)u.push(a+"_"+m.toString().padStart(4,"0"));g=u}for(let m=0;m<s.length;m++){const f=n[s[m]],I={};let y=g[s[m]];if(Object.prototype.hasOwnProperty.call(f,"parentIndex")&&(I.parentIndex=f.parentIndex),f.componentId){const _=this.$method("dsWidget/getLayout",o+a+"_"+h),w={dsComponentId:f.componentId};this.modifiers[_]&&this.modifiers[_][l]&&(w.dsComponentModifierId=this.modifiers[_][l]);const j=this.$method("dsComponent/get",w);if(j.textNode?this.$method("dsView/createNode",y):this.$method("dsView/createElement",{dsViewId:y,dsWidgetSectionId:o,dsWidgetInstanceId:a,dsComponent:j}),i[l]){const R=i[l];for(let T=0;T<R.action.length;T++)this.$method("dsEvent/addListener",{id:y,name:R.on,dsActionId:R.action[T]})}I.viewId=y}else y=d;if(p.push(I),f.children){const _=this._getSibling(e,f.children,u),w=this._create(t,e,_.head,_.children,i,o,a,d,c,r,h,u,_.components,++l);Object.hasOwnProperty.call(f,"contentIndex")&&(I.contentIndex=f.contentIndex),p=p.concat(w)}else Object.hasOwnProperty.call(f,"contentIndex")&&(I.contentIndex=f.contentIndex);l++}return p},_setComponents(t,e,s){this.components[s+t]=e},_getHead(t){return this.head[t]||[0]},_getEvent(t){return this.event[t]||[]},_getItem(t){return this.items[t]},_getSibling(t,e,s){const n={head:[],children:[],components:[]};for(let i=0;i<e.length;i++){const o=e[i];n.components.push(s[o]),n.children.push(t[o]),n.head.push(i)}return n}}},k={name:"dsToken",version:1,data:{process:{},values:{heading:{default:"Add title"}}},tokens:{empty(){return""},placeholder(t){const e=this.$method("dsMetadata/getLang"),s=this.values[t[2]];return s[e]?s[e]:s.default}},methods:{textContent({instanceId:t,text:e,updateText:s}){let n=0;(!this.process[t]||this.process[t].tokens!==e)&&(this.process[t]={list:{},text:e,tokens:e});const i=this.process[t];for(let o=0;o<i.text.length;o++)if(i.text[o]==="["){let a="";for(let d=o+1;d<i.text.length;d++){const c=i.text[d];if(c==="]"){let r=0;a.length>1&&(i.list[n]={id:a,processed:!1,value:"",start:o},r=this._get("values",t,i,n,a.split(":"),o,d+1,s),n++),o=o+r;break}a+=c}}},_get(t,e,s,n,i,o,a,d){const c=s.list[n];let r=0;return c.value=this.$token(i[0]+"/"+i[1],i),c.value===void 0&&(c.value="["+i.join(":")+"]"),c.value instanceof Promise?(c.value.then(h=>{for(let u=0;u<n;u++){const g=s.list[u];g.processed&&(o+=g.valueLength)}this._updateText(s,c,h,o,o,d),c.processed=!0}),this._updateText(s,c,"",o,a,d)):(this._updateText(s,c,c.value,o,a,d),c.processed=!0,r=c.value.length),r},_splice(t,e,s,n=""){return t.slice(0,e)+n+t.slice(s)},_updateText(t,e,s,n,i,o){e.valueLength=s.length,t.text=this._splice(t.text,n,i,s),o(t.text)}}},z=(t,e)=>{const s=t[e];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((n,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e)))})},K={link({id:t,crossOrigin:e,href:s,media:n,referrerPolicy:i,rel:o="stylesheet",integrity:a,onSuccess:d=()=>{},onError:c=()=>{}}){const[r,h]=this._exists(t,"link","href",s);r.onerror=()=>c(),r.onload=()=>d(),r.id=t,r.rel=o,r.crossOrigin=e||null,n&&(r.media=n),i&&(r.referrerPolicy=i),a&&(r.integrity=a),r.href=s,h||document.head.appendChild(r)},script({id:t,async:e,crossOrigin:s,defer:n,integrity:i,nonce:o,referrerPolicy:a,src:d,type:c="text/javascript",nomodule:r,globalVars:h=[],onSuccess:u=()=>{},onError:g=()=>{}}){const[l,p]=this._exists(t,"script","src",d);l.onerror=()=>g(),l.onload=()=>{const m={};for(let f=0;f<h.length;f++){const I=h[f];m[I]=window[I]}u(m)},l.id=t,l.type=c,l.async=e||null,l.crossOrigin=s||null,l.defer=n||null,i&&(l.integrity=i),a&&(l.referrerPolicy=a),l.nomodule=r||null,l.nonce=o||null,l.src=d,p||document.head.appendChild(l)},_exists(t,e,s,n){let i=document.getElementById(t),o=!1;if(i){if(i[s]===n)return;o=!0}else i=document.createElement(e);return[i,o]}},N="dsManager",F=1,G={name:N,version:F,data:{DsPlugin:()=>{},_methods:{},_tokens:{},_components:{},buildId:0,plugins:{},pluginUseQueue:[],depQueue:{},queue:{},isLoaded:{},initialising:{},setupOnRequest:{},setupOnRequestQueue:{},options:{},context:{},isDev:!1},setup({DsPlugin:t,plugins:e={},isDev:s=!1}){this.DsPlugin=t,this.context=[{name:"$action",value:this._action.bind(this)},{name:"$method",value:this._method.bind(this)},{name:"$resource",value:K},{name:"isDev",value:s},{name:"$token",value:this._token.bind(this),scope:["dsToken"]},{name:"$component",value:this._component.bind(this),scope:["dsComponent","dsParse","dsView"]}],this.isDev=s,this.isLoaded[N]=!0;for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];this._addOptions(i.name,i.options),this.plugins[i.name]=i,this.pluginUseQueue.push(i),this.queue[i.name]=[],this.depQueue[i.name]=[]}for(let n=0;n<this.pluginUseQueue.length;n++){const i=this.pluginUseQueue[n];if(!this._getQueue(i.name).length){const o=this._install(i.name,i.plugin);this.queue[i.name]=[o]}}if(s)return{$method:this._method.bind(this),$action:this._action.bind(this)}},methods:{_action(t,e,s={}){this._callbackWhenAvailable(t,()=>{const n=s.onSuccess,i=s.onError,o=this._methods[t](e);i&&o instanceof Error?i.method?i.method({...i.params,results:o}):i(o):o instanceof Promise?Promise.resolve(o).then(a=>{n&&(n.method?n.method({...n.params,results:a}):n(a))}).catch(a=>{i&&(i.method?i.method({...i.params,results:a}):i(a))}):n&&(n.method?n.method({...n.params,results:o}):n(o))})},_actionExists(t){return this._methods[t]},_add(t){if(this.buildId+=t.version,t.methods){for(const e in t.methods)if(Object.hasOwnProperty.call(t.methods,e)){const s=t.methods[e];this._methods[`${t.name}/${e}`]=s}}if(t.tokens){for(const e in t.tokens)if(Object.hasOwnProperty.call(t.tokens,e)){const s=t.tokens[e];this._tokens[`${t.name}/${e}`]=s}}if(t.components)for(let e=0;e<t.components.length;e++){const s=t.components[e];this._components[s.name]={...s,plugin:t.name}}},_addOptions(t,e={}){this.setupOnRequest[t]=!!e.setupOnRequest,this.isLoaded[t]=!1,this.options[t]=e},_component(t){if(this._components[t]){const e=this._components[t];if(!this.isLoaded[e.plugin]&&this.setupOnRequestQueue[e.plugin]){const s=e.plugin,n=this._getOptions(s),i=this.setupOnRequestQueue[s];this._setup(i,n.setup).catch(o=>console.error(o))}return e.isLazy&&!e.loading&&(e.loading=!0,e.lazy().then(()=>{e.loading=!1}).catch(s=>console.error(s))),e}},_get(t){return this.plugins[t]?this.plugins[t].plugin:this.setupOnRequestQueue[t]},_callbackWhenAvailable(t,e){const s=t.split("/")[0];if(this.isLoaded[s]&&this._actionExists(t))return e();if(this.initialising[s]){const n=this._getQueue(s);Promise.all(n).then(()=>{this._actionExists(t)?e():console.error("action does not exist: "+t)})}else{const n=this._get(s),i=this._install(s,n,!0);this.queue[s].push(i),i.then(()=>{this._actionExists(t)?e():console.error("action does not exist: "+t)}).catch(o=>console.error(o))}},_getQueue(t){return this.queue[t]||[]},_getOptions(t){return this.options[t]||{}},_install(t,e,s=!1){return new Promise((n,i)=>{const o=this._getOptions(t);if(this.isLoaded[t]=!1,this.initialising[t]=!0,o.import)if(!o.setupOnRequest||s)z(Object.assign({"./plugins/ds-plugin-database.js":()=>v(()=>import("./ds-plugin-database.e55bb606.4eac38c9.js"),[]),"./plugins/ds-plugin-parse.js":()=>v(()=>import("./ds-plugin-parse.9f9c58d8.7a166e1d.js"),[]),"./plugins/ds-plugin-template.js":()=>v(()=>import("./ds-plugin-template.5bfc34cc.6e8bcdc0.js"),[]),"./plugins/ds-plugin-utilities.js":()=>v(()=>import("./ds-plugin-utilities.e40685ea.c5e2dc19.js"),[])}),`./plugins/${o.import}.js`).then(({default:a})=>{a.dependencies&&this._installDependencies(t,a.dependencies);const d=new this.DsPlugin(a,this.context,this.isDev);this._add(d),this._setup(d,o.setup).then(()=>n(`Setup import ${t}`)).catch(c=>i(c))}).catch(a=>i(a));else return this.initialising[t]=!1,n(`Lazy loading ${t}`);else{let a;if(this.setupOnRequestQueue[t]?a=this.setupOnRequestQueue[t]:(a=new this.DsPlugin(e,this.context,this.isDev),this._add(a)),o.setupOnRequest&&!s)return this.setupOnRequestQueue[t]=a,this.initialising[t]=!1,n();a.dependencies&&this._installDependencies(t,a.dependencies),this._setup(a,o.setup).then(()=>n(t)).catch(d=>i(d))}})},_installDependencies(t,e){for(let s=0;s<e.length;s++){const n=e[s];if(!this.isLoaded[n.name]){const i=this._use({name:n.name,options:{setupOnRequest:!1}});this.depQueue[t].push(i)}}},_method(t,e){try{if(this._methods[t])return this._methods[t](e);throw new Error('Method "'+t+'" does not exist')}catch(s){console.error(t,s)}},_setup(t,e={}){return new Promise((s,n)=>{const i=this.depQueue[t.name];Promise.all(i).then(()=>{const o=t.init(e);o instanceof Promise?o.then(()=>{this.isLoaded[t.name]=!0,this.initialising[t.name]=!1,delete this.setupOnRequestQueue[t.name],console.log("Plugin successfully async loaded: "+t.name),s(t.name)}).catch(a=>n(a)):(this.isLoaded[t.name]=!0,this.initialising[t.name]=!1,console.log("Plugin successfully loaded: "+t.name),s(t.name))}).catch(o=>n(o))})},_token(t,e){if(this._tokens[t])return this._tokens[t](e)},_use({name:t,options:e={}}){if(this.isLoaded[t])return Promise.resolve();const s=this._get(t),n=this._getQueue(t);let i=!1;if(!this.initialising[t]&&(!this.setupOnRequest[t]||!e.setupOnRequest)&&(i=!0),!n||i){const o=this._install(t,s,i);return n.push(o),o}return Promise.resolve()}}},S={name:"dsPage",version:1,dependencies:[{name:"dsRouter",version:1},{name:"dsComponent",version:1},{name:"dsLayout",version:1},{name:"dsView",version:1},{name:"dsContent",version:1},{name:"dsWidget",version:1}],data:{items:{},templates:{},entry:{}},setup({dsPage:t}){t&&Promise.resolve(t).then(e=>{if(this.$method("dsMetadata/setTheme",e.app.theme),this.$method("dsMetadata/setAppId",e.app.id),this.set(e),e.foundPath&&e.foundPath!==e.path)return this.$method("dsRouter/navigate",this._cleanPath(e.path));this._render(e.id)}).catch(e=>console.log(e))},methods:{getOneById({dsPageId:t,expand:e}){const s={collection:"pages",id:t};return e&&(s.options={expand:e}),new Promise(n=>{this.$action("dsDatabase/getOne",s,{onSuccess:i=>n(i),onError:i=>{console.error(i),n(i)}})})},getOneByPath({dsPagePath:t,expand:e}){return new Promise((s,n)=>{const i=`(path='${t}')`,o={filter:i};e&&(o.expand=e),this.$action("dsDatabase/getList",{collection:"pages",options:o},{onSuccess:a=>{const d=a;d.foundPath=a.path,s(d)},onError:a=>{if(a.code===404){const d=e.split(",");let c="page";for(let r=0;r<d.length;r++)c+=",page."+d[r];this.$action("dsDatabase/getList",{collection:"pagePaths",options:{filter:i,expand:c}},{onSuccess:r=>{const h=r.items[0]["@expand"].page;h.foundPath=r.path,s(h)},onError:r=>{console.error(r),n(r)}})}else console.error(a),n(a)}})})},updateDOM({dsPagePrevId:t,dsPageNextId:e}){const s=this.items[t],n=this.types[s.typesId],i=s.templateId||n.templateId,o=this.templates[i],a=this.items[e],d=this.types[a.typesId],c=a.templateId||d.templateId,r=this.templates[c],h=r.widgets.length,u=o.widgets.length,g=h>u?h:u;for(let l=0;l<g;l++){const p=r.widgets[l],m=o.widgets[l];p?this.$method("dsWidget/update",{dsViewId:this.$method("dsView/getRootViewId"),dsWidgetPrefixId:t,dsWidgetSectionId:m,dsWidgetNextPrefixId:e,dsWidgetNextSectionId:p}):m&&this.$method("dsWidget/remove",{dsWidgetSectionId:m,dsWidgetPrefixId:t})}},set(t){this.$method("dsRouter/setPath",{pageId:t.id,path:this._cleanPath(t.path)}),t.actions&&this.$method("dsAction/set",t.actions),t.parameters&&(this.$method("dsParameter/set",t.parameters.items),this.$method("dsParameter/setUsedBy",t.parameters.usedBy)),t.components&&this.$method("dsComponent/set",t.components),t.layouts&&(t.layouts.items&&this.$method("dsLayout/setItems",t.layouts.items),t.layouts.head&&this.$method("dsLayout/setHead",t.layouts.head),t.layouts.modifiers&&this.$method("dsLayout/setModifiers",t.layouts.modifiers)),t.content&&(t.content.value&&this.$method("dsContent/setValues",t.content.value),t.content.type&&this.$method("dsContent/setTypes",t.content.type)),t.widgets&&this.$method("dsWidget/set",{dsPageId:t.id,payload:t.widgets}),this._setItem(t.id,t.metadata),this._setTemplate(t.templates)},_cleanPath(t){const e=t.split("/");return e.shift(),"/"+e.join("/")},_render(t){const e=this.$method("dsView/getRootViewId"),s=this.$method("dsWidget/getEntry",t);for(let n=0;n<s.length;n++){const i=s[n];this.$method("dsWidget/create",{dsViewId:e,prefixId:t,dsWidgetSectionId:i})}},_setItem(t,e){this.items[t]=e},_setTemplate(t){this.templates={...this.templates,...t}}}},L={name:"dsView",version:1,data:{rootViewId:"",attributes:{},content:{},handlers:{},nodes:{},parentNode:{}},setup({rootElementId:t="root"}){const e=document.getElementById(t);if(!e)throw new Error("Could not find root element: ",e);this.rootViewId="appElement",this.createElement({dsViewId:this.rootViewId,dsComponent:{tag:"div"}});const s=this.get(this.rootViewId);e.parentElement.replaceChild(s,e)},methods:{append({dsViewId:t,dsViewParentId:e}){const s=this.get(e),n=this.get(t);s.appendChild(n),this.$method("dsEvent/emit",{dsEventId:t,dsEventOn:"dsView/mount",payload:{dsViewParentId:e,dsViewId:t}}),this._setParent(t,e)},attachContent({dsViewId:t,dsContentId:e}){this.content[t]=e},createElement({dsViewId:t,dsComponent:e,dsWidgetSectionId:s,dsWidgetInstanceId:n}){const i=document.createElement(e.tag);this.isDev&&(i.id=t),i.dsViewId=t,this._set(t,i),e.attributes&&this._setAttributes(t,e.attributes);const o=this.$component(i.tagName.toLowerCase());if(o&&o.events)for(let a=0;a<o.events.length;a++){const d=o.events[a],c=r=>{this.$method("dsEvent/emit",{dsEventId:t,dsEventOn:d,payload:{dsViewId:t,dsContentId:this._getContent(t),dsWidgetInstanceId:n,dsWidgetSectionId:s,event:r}})};i.addEventListener(d,c),this._setHander(t,c)}},createNode(t){const e=document.createTextNode("");e.dsViewId=t,this._set(t,e)},get(t){return this.nodes[t]},getParent(t){return this.parentNode[t]},getValue(t){const e=this.get(t),s=e.nodeName.toLowerCase(),n=this.$component(s);if(n&&n.get){if(n.get.type)return this[`_getValueBy/${n.get.type}`](e,n.get.value);let i;for(let o=0;o<n.getter.length;o++){const a=n.get[o],d=this[`_getValueBy/${a.type}`](e,a.value);i={...i,...d}}return i}},getRootViewId(){return this.rootViewId},remove(t){const e=this.get(t);e&&(delete this.content[t],this._unmount(t),this._removeHanders(t),e.remove())},removeChildren(t){const e=this.get(t);if(e&&e.lastChild){for(;e.lastChild;)this._unmount(e.lastChild.dsViewId),this._removeHanders(e.lastChild.dsViewId),e.removeChild(e.lastChild);this.$method("dsEvent/emit",{dsEventId:t,dsEventOn:"dsView/removeChildren",payload:{dsViewId:t}})}},replace({dsViewParentId:t,dsViewId:e,prevDsViewId:s,childIndex:n}){const i=this.get(e);let o,a;s?(o=this.get(s),a=o.parentElement):isNaN(n)||(a=this.get(t),o=a.childNodes[n]),o&&(o.replaceWidth(i),this._unmount(o.dsViewId),this.$method("dsEvent/emit",{dsEventId:e,dsEventOn:"dsView/mount",payload:{dsViewId:e}}),this._setParent(e,a.dsViewId))},updateValue({dsViewId:t,dsContentValue:e,language:s}){const n=this.get(t),i=n.nodeName.toLowerCase();if(i==="#text"){if(e.token)return this.$method("dsToken/textContent",{instanceId:t,text:e.text,updateText:n.textContent});n.textContent=e.text;return}const o=this.$component(i);if(o&&o.setter){if(o.setter.type)return this[`_setValueBy/${o.setter.type}`](n,o.setter.value,e);for(let a=0;a<o.setter.length;a++){const d=o.setter[a];this[`_setValueBy/${d.type}`](n,d.value,e)}}},_getContent(t){return this.content[t]},"_getValueBy/attribute"(t,e){if(typeof e=="string")return t.getAttribute(e);const s={};for(let n=0;n<e.length;n++){const{name:i,key:o}=e[n];s[o]=t.getAttribute(i)}return s},"_getValueBy/getter"(t,e){if(typeof e=="string")return t.__lookupGetter__(e)?t[e]:"";{const s={};for(let n=0;n<e.length;n++){const{name:i,key:o}=e[n];t.__lookupGetter__(e)?s[o]=t[i]:s[o]=""}return s}},_removeHanders(t){delete this.handlers[t]},_set(t,e){this.nodes[t]=e},_setAttributes(t,e){const s=this.get(t);for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.setAttribute(n,e[n])},_setHander(t,e){this.handlers[t]?this.handlers[t].push(e):this.handlers[t]=[e]},_setParent(t,e){this.parentNode[e]=t},"_setValueBy/attribute"(t,e,s){if(typeof e=="string")return t.setAttribute(e,s);for(let n=0;n<e.length;n++){const{name:i,key:o}=e[n];t.setAttribute(i,s[o])}},"_setValueBy/setter"(t,e,s){if(typeof e=="string")t.__lookupSetter__(e)&&(t[e]=s);else for(let n=0;n<e.length;n++){const{name:i,key:o}=e[n];t.__lookupSetter__(i)&&(t[i]=s[o])}},_unmount(t){this.$method("dsEvent/emit",{dsEventId:t,dsEventOn:"dsView/unmount",payload:{dsViewId:t}}),this._setParent(t,"")}}},A={name:"dsContent",version:1,data:{value:{},type:{},attachedView:{}},methods:{attachView({dsContentId:t,dsViewId:e}){const s=this.attachedView[t]||[],n=this.getValue({dsContentId:t});s.length?s.indexOf(e)===-1&&s.push(e):s.push(e),this.attachedView[t]=s,this.$method("dsView/attachContent",{dsViewId:e,dsContentId:t}),n&&this.$method("dsView/updateValue",{dsViewId:e,value:n}),this.$method("dsEvent/emit",{dsEventId:e,dsEventOn:"dsContent/attachView",payload:{dsContentId:t,dsViewId:e}})},detachView({dsContentId:t,dsViewId:e}){const s=this.attachedView[t]||[];if(s.length){const n=s.indexOf(e);n>-1&&s.splice(n,1)}this.attachedView[t]=s,this.$method("dsView/detachContent",e),this.$method("dsEvent/emit",{dsEventId:e,dsEventOn:"dsContent/detachView",payload:{dsContentId:t,dsViewId:e}})},getType(t){return this.type[t]},getValue({dsContentId:t,language:e}){return e||(e=this.$method("dsMetadata/getLanguage")),this.value[t]?this.value[t][e]?this.value[t][e]:this.value[t][e]:""},setTypes(t){this.type={...this.type,...t}},setValue({dsContentId:t,dsContentValue:e,language:s}){s=s||this.$method("dsMetadata/getLanguage"),this.value[t]?this.value[t][s]=e:this.value[t]={[s]:e},this.$method("dsEvent/emit",{dsEventId:t,dsEventOn:"dsContent/setValue",payload:{dsContentId:t,dsContentValue:e,language:s}})},setValues(t){this.value={...this.value,...t}}}};const J={DsPlugin:M,dsManager:G,plugins:{[P.name]:{name:P.name,version:P.version,plugin:P},[k.name]:{name:k.name,version:k.version,plugin:k},[b.name]:{name:b.name,version:b.version,plugin:b},[C.name]:{name:C.name,version:C.version,plugin:C},[L.name]:{name:L.name,version:L.version,plugin:L},[A.name]:{name:A.name,version:A.version,plugin:A},[W.name]:{name:W.name,version:W.version,plugin:W},[x.name]:{name:x.name,version:x.version,plugin:x},[V.name]:{name:V.name,version:V.version,plugin:V},[O.name]:{name:O.name,version:O.version,plugin:O},[E.name]:{name:E.name,version:E.version,plugin:E},[$.name]:{name:$.name,version:$.version,plugin:$},[S.name]:{name:S.name,version:S.version,plugin:S},dsParse:{name:"dsParse",version:1,options:{import:"ds-plugin-parse",setupOnRequest:!0}},dsDatabase:{name:"dsDatabase",version:1,options:{import:"ds-plugin-database",setupOnRequest:!0}},dsTemplate:{name:"dsTemplate",version:1,options:{import:"ds-plugin-template",setupOnRequest:!0}},dsUtilities:{name:"dsUtilities",version:1,options:{import:"ds-plugin-utilities",setupOnRequest:!0}}},use(t={},e={}){const s={name:t.name,version:t.version,options:e};e.import||(s.plugin=t),this.plugins[t.name]=s},init({dsPage:t,assetsURL:e,isDev:s,rootElementId:n="app"}){const i=new this.DsPlugin(this.dsManager,[],s);return t&&(this.plugins.dsPage.options?this.plugins.dsPage.options.setup?this.plugins.dsPage.options={...this.plugins.dsPage.options.setup,dsPage:t}:this.plugins.dsPage.options={...this.plugins.dsPage.options,setup:{dsPage:t}}:this.plugins.dsPage.options={setup:{dsPage:t}}),i.init({build:1,plugins:this.plugins,DsPlugin:this.DsPlugin,isDev:s})}};J.init({appRootElementId:"app",prefetchedPage:window.dsInitPage()});export{X as __vite_legacy_guard};
//# sourceMappingURL=index.8cef76bb.js.map
