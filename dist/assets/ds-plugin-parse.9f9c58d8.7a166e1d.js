function et(p){throw new Error('Could not dynamically require "'+p+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ut={exports:{}};(function(p,h){(function(c){p.exports=c()})(function(){return function c(d,g,w){function k(I,v){if(!g[I]){if(!d[I]){var L=typeof et=="function"&&et;if(!v&&L)return L(I,!0);if(N)return N(I,!0);throw new Error("Cannot find module '"+I+"'")}v=g[I]={exports:{}},d[I][0].call(v.exports,function(S){var $=d[I][1][S];return k($||S)},v,v.exports,c,d,g,w)}return g[I].exports}for(var N=typeof et=="function"&&et,U=0;U<w.length;U++)k(w[U]);return k}({1:[function(c,d,g){(function(w,k,N,U,I,v,L,S,$){var m=c("crypto");function j(s,f){f=E(s,f);var n;return(n=f.algorithm!=="passthrough"?m.createHash(f.algorithm):new T).write===void 0&&(n.write=n.update,n.end=n.update),A(f,n).dispatch(s),n.update||n.end(""),n.digest?n.digest(f.encoding==="buffer"?void 0:f.encoding):(s=n.read(),f.encoding!=="buffer"?s.toString(f.encoding):s)}(g=d.exports=j).sha1=function(s){return j(s)},g.keys=function(s){return j(s,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},g.MD5=function(s){return j(s,{algorithm:"md5",encoding:"hex"})},g.keysMD5=function(s){return j(s,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var a=m.getHashes?m.getHashes().slice():["sha1","md5"],y=(a.push("passthrough"),["buffer","hex","binary","base64"]);function E(s,f){var n={};if(n.algorithm=(f=f||{}).algorithm||"sha1",n.encoding=f.encoding||"hex",n.excludeValues=!!f.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=f.ignoreUnknown===!0,n.respectType=f.respectType!==!1,n.respectFunctionNames=f.respectFunctionNames!==!1,n.respectFunctionProperties=f.respectFunctionProperties!==!1,n.unorderedArrays=f.unorderedArrays===!0,n.unorderedSets=f.unorderedSets!==!1,n.unorderedObjects=f.unorderedObjects!==!1,n.replacer=f.replacer||void 0,n.excludeKeys=f.excludeKeys||void 0,s===void 0)throw new Error("Object argument required.");for(var o=0;o<a.length;++o)a[o].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=a[o]);if(a.indexOf(n.algorithm)===-1)throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+a.join(", "));if(y.indexOf(n.encoding)===-1&&n.algorithm!=="passthrough")throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+y.join(", "));return n}function B(s){if(typeof s=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(s))!=null}function A(s,f,n){n=n||[];function o(e){return f.update?f.update(e,"utf8"):f.write(e,"utf8")}return{dispatch:function(e){return this["_"+((e=s.replacer?s.replacer(e):e)===null?"null":typeof e)](e)},_object:function(e){var u,l=Object.prototype.toString.call(e),Y=/\[object (.*)\]/i.exec(l);if(Y=(Y=Y?Y[1]:"unknown:["+l+"]").toLowerCase(),0<=(l=n.indexOf(e)))return this.dispatch("[CIRCULAR:"+l+"]");if(n.push(e),N!==void 0&&N.isBuffer&&N.isBuffer(e))return o("buffer:"),o(e);if(Y==="object"||Y==="function"||Y==="asyncfunction")return l=Object.keys(e),s.unorderedObjects&&(l=l.sort()),s.respectType===!1||B(e)||l.splice(0,0,"prototype","__proto__","constructor"),s.excludeKeys&&(l=l.filter(function(F){return!s.excludeKeys(F)})),o("object:"+l.length+":"),u=this,l.forEach(function(F){u.dispatch(F),o(":"),s.excludeValues||u.dispatch(e[F]),o(",")});if(!this["_"+Y]){if(s.ignoreUnknown)return o("["+Y+"]");throw new Error('Unknown object type "'+Y+'"')}this["_"+Y](e)},_array:function(e,F){F=F!==void 0?F:s.unorderedArrays!==!1;var l=this;if(o("array:"+e.length+":"),!F||e.length<=1)return e.forEach(function(D){return l.dispatch(D)});var Y=[],F=e.map(function(D){var M=new T,O=n.slice();return A(s,M,O).dispatch(D),Y=Y.concat(O.slice(n.length)),M.read().toString()});return n=n.concat(Y),F.sort(),this._array(F,!1)},_date:function(e){return o("date:"+e.toJSON())},_symbol:function(e){return o("symbol:"+e.toString())},_error:function(e){return o("error:"+e.toString())},_boolean:function(e){return o("bool:"+e.toString())},_string:function(e){o("string:"+e.length+":"),o(e.toString())},_function:function(e){o("fn:"),B(e)?this.dispatch("[native]"):this.dispatch(e.toString()),s.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(e.name)),s.respectFunctionProperties&&this._object(e)},_number:function(e){return o("number:"+e.toString())},_xml:function(e){return o("xml:"+e.toString())},_null:function(){return o("Null")},_undefined:function(){return o("Undefined")},_regexp:function(e){return o("regex:"+e.toString())},_uint8array:function(e){return o("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return o("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return o("int8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return o("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return o("int16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return o("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return o("int32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return o("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return o("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return o("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return o("url:"+e.toString())},_map:function(e){return o("map:"),e=Array.from(e),this._array(e,s.unorderedSets!==!1)},_set:function(e){return o("set:"),e=Array.from(e),this._array(e,s.unorderedSets!==!1)},_file:function(e){return o("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},_blob:function(){if(s.ignoreUnknown)return o("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return o("domwindow")},_bigint:function(e){return o("bigint:"+e.toString())},_process:function(){return o("process")},_timer:function(){return o("timer")},_pipe:function(){return o("pipe")},_tcp:function(){return o("tcp")},_udp:function(){return o("udp")},_tty:function(){return o("tty")},_statwatcher:function(){return o("statwatcher")},_securecontext:function(){return o("securecontext")},_connection:function(){return o("connection")},_zlib:function(){return o("zlib")},_context:function(){return o("context")},_nodescript:function(){return o("nodescript")},_httpparser:function(){return o("httpparser")},_dataview:function(){return o("dataview")},_signal:function(){return o("signal")},_fsevent:function(){return o("fsevent")},_tlswrap:function(){return o("tlswrap")}}}function T(){return{buf:"",write:function(s){this.buf+=s},end:function(s){this.buf+=s},read:function(){return this.buf}}}g.writeToStream=function(s,f,n){return n===void 0&&(n=f,f={}),A(f=E(s,f),n).dispatch(s)}}).call(this,c("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},c("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(c,d,g){(function(w,k,N,U,I,v,L,S,$){(function(m){var j=typeof Uint8Array<"u"?Uint8Array:Array,a="+".charCodeAt(0),y="/".charCodeAt(0),E="0".charCodeAt(0),B="a".charCodeAt(0),A="A".charCodeAt(0),T="-".charCodeAt(0),s="_".charCodeAt(0);function f(n){return n=n.charCodeAt(0),n===a||n===T?62:n===y||n===s?63:n<E?-1:n<E+10?n-E+26+26:n<A+26?n-A:n<B+26?n-B+26:void 0}m.toByteArray=function(n){var o,e;if(0<n.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var u=n.length,u=n.charAt(u-2)==="="?2:n.charAt(u-1)==="="?1:0,l=new j(3*n.length/4-u),Y=0<u?n.length-4:n.length,F=0;function D(M){l[F++]=M}for(o=0;o<Y;o+=4,0)D((16711680&(e=f(n.charAt(o))<<18|f(n.charAt(o+1))<<12|f(n.charAt(o+2))<<6|f(n.charAt(o+3))))>>16),D((65280&e)>>8),D(255&e);return u==2?D(255&(e=f(n.charAt(o))<<2|f(n.charAt(o+1))>>4)):u==1&&(D((e=f(n.charAt(o))<<10|f(n.charAt(o+1))<<4|f(n.charAt(o+2))>>2)>>8&255),D(255&e)),l},m.fromByteArray=function(n){var o,e,u,l,Y=n.length%3,F="";function D(M){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(M)}for(o=0,u=n.length-Y;o<u;o+=3)e=(n[o]<<16)+(n[o+1]<<8)+n[o+2],F+=D((l=e)>>18&63)+D(l>>12&63)+D(l>>6&63)+D(63&l);switch(Y){case 1:F=(F+=D((e=n[n.length-1])>>2))+D(e<<4&63)+"==";break;case 2:F=(F=(F+=D((e=(n[n.length-2]<<8)+n[n.length-1])>>10))+D(e>>4&63))+D(e<<2&63)+"="}return F}})(g===void 0?this.base64js={}:g)}).call(this,c("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},c("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(c,d,g){(function(w,k,a,U,I,v,L,S,$){var m=c("base64-js"),j=c("ieee754");function a(t,r,i){if(!(this instanceof a))return new a(t,r,i);var _,b,C,P,q=typeof t;if(r==="base64"&&q=="string")for(t=(P=t).trim?P.trim():P.replace(/^\s+|\s+$/g,"");t.length%4!=0;)t+="=";if(q=="number")_=G(t);else if(q=="string")_=a.byteLength(t,r);else{if(q!="object")throw new Error("First argument needs to be a number, array or string.");_=G(t.length)}if(a._useTypedArrays?b=a._augment(new Uint8Array(_)):((b=this).length=_,b._isBuffer=!0),a._useTypedArrays&&typeof t.byteLength=="number")b._set(t);else if(V(P=t)||a.isBuffer(P)||P&&typeof P=="object"&&typeof P.length=="number")for(C=0;C<_;C++)a.isBuffer(t)?b[C]=t.readUInt8(C):b[C]=t[C];else if(q=="string")b.write(t,0,r);else if(q=="number"&&!a._useTypedArrays&&!i)for(C=0;C<_;C++)b[C]=0;return b}function y(t,r,i,_){return a._charsWritten=tt(function(b){for(var C=[],P=0;P<b.length;P++)C.push(255&b.charCodeAt(P));return C}(r),t,i,_)}function E(t,r,i,_){return a._charsWritten=tt(function(b){for(var C,P,q=[],K=0;K<b.length;K++)P=b.charCodeAt(K),C=P>>8,P=P%256,q.push(P),q.push(C);return q}(r),t,i,_)}function B(t,r,i){var _="";i=Math.min(t.length,i);for(var b=r;b<i;b++)_+=String.fromCharCode(t[b]);return _}function A(t,r,i,C){C||(x(typeof i=="boolean","missing or invalid endian"),x(r!=null,"missing offset"),x(r+1<t.length,"Trying to read beyond buffer length"));var b,C=t.length;if(!(C<=r))return i?(b=t[r],r+1<C&&(b|=t[r+1]<<8)):(b=t[r]<<8,r+1<C&&(b|=t[r+1])),b}function T(t,r,i,C){C||(x(typeof i=="boolean","missing or invalid endian"),x(r!=null,"missing offset"),x(r+3<t.length,"Trying to read beyond buffer length"));var b,C=t.length;if(!(C<=r))return i?(r+2<C&&(b=t[r+2]<<16),r+1<C&&(b|=t[r+1]<<8),b|=t[r],r+3<C&&(b+=t[r+3]<<24>>>0)):(r+1<C&&(b=t[r+1]<<16),r+2<C&&(b|=t[r+2]<<8),r+3<C&&(b|=t[r+3]),b+=t[r]<<24>>>0),b}function s(t,r,i,_){if(_||(x(typeof i=="boolean","missing or invalid endian"),x(r!=null,"missing offset"),x(r+1<t.length,"Trying to read beyond buffer length")),!(t.length<=r))return _=A(t,r,i,!0),32768&_?-1*(65535-_+1):_}function f(t,r,i,_){if(_||(x(typeof i=="boolean","missing or invalid endian"),x(r!=null,"missing offset"),x(r+3<t.length,"Trying to read beyond buffer length")),!(t.length<=r))return _=T(t,r,i,!0),2147483648&_?-1*(4294967295-_+1):_}function n(t,r,i,_){return _||(x(typeof i=="boolean","missing or invalid endian"),x(r+3<t.length,"Trying to read beyond buffer length")),j.read(t,r,i,23,4)}function o(t,r,i,_){return _||(x(typeof i=="boolean","missing or invalid endian"),x(r+7<t.length,"Trying to read beyond buffer length")),j.read(t,r,i,52,8)}function e(t,r,i,_,b){if(b||(x(r!=null,"missing value"),x(typeof _=="boolean","missing or invalid endian"),x(i!=null,"missing offset"),x(i+1<t.length,"trying to write beyond buffer length"),nt(r,65535)),b=t.length,!(b<=i))for(var C=0,P=Math.min(b-i,2);C<P;C++)t[i+C]=(r&255<<8*(_?C:1-C))>>>8*(_?C:1-C)}function u(t,r,i,_,b){if(b||(x(r!=null,"missing value"),x(typeof _=="boolean","missing or invalid endian"),x(i!=null,"missing offset"),x(i+3<t.length,"trying to write beyond buffer length"),nt(r,4294967295)),b=t.length,!(b<=i))for(var C=0,P=Math.min(b-i,4);C<P;C++)t[i+C]=r>>>8*(_?C:3-C)&255}function l(t,r,i,_,b){b||(x(r!=null,"missing value"),x(typeof _=="boolean","missing or invalid endian"),x(i!=null,"missing offset"),x(i+1<t.length,"Trying to write beyond buffer length"),rt(r,32767,-32768)),t.length<=i||e(t,0<=r?r:65535+r+1,i,_,b)}function Y(t,r,i,_,b){b||(x(r!=null,"missing value"),x(typeof _=="boolean","missing or invalid endian"),x(i!=null,"missing offset"),x(i+3<t.length,"Trying to write beyond buffer length"),rt(r,2147483647,-2147483648)),t.length<=i||u(t,0<=r?r:4294967295+r+1,i,_,b)}function F(t,r,i,_,b){b||(x(r!=null,"missing value"),x(typeof _=="boolean","missing or invalid endian"),x(i!=null,"missing offset"),x(i+3<t.length,"Trying to write beyond buffer length"),st(r,34028234663852886e22,-34028234663852886e22)),t.length<=i||j.write(t,r,i,_,23,4)}function D(t,r,i,_,b){b||(x(r!=null,"missing value"),x(typeof _=="boolean","missing or invalid endian"),x(i!=null,"missing offset"),x(i+7<t.length,"Trying to write beyond buffer length"),st(r,17976931348623157e292,-17976931348623157e292)),t.length<=i||j.write(t,r,i,_,52,8)}g.Buffer=a,g.SlowBuffer=a,g.INSPECT_MAX_BYTES=50,a.poolSize=8192,a._useTypedArrays=function(){try{var t=new ArrayBuffer(0),r=new Uint8Array(t);return r.foo=function(){return 42},r.foo()===42&&typeof r.subarray=="function"}catch(i){return!1}}(),a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.isBuffer=function(t){return!(t==null||!t._isBuffer)},a.byteLength=function(t,r){var i;switch(t+="",r||"utf8"){case"hex":i=t.length/2;break;case"utf8":case"utf-8":i=X(t).length;break;case"ascii":case"binary":case"raw":i=t.length;break;case"base64":i=ot(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=2*t.length;break;default:throw new Error("Unknown encoding")}return i},a.concat=function(t,r){if(x(V(t),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),t.length===0)return new a(0);if(t.length===1)return t[0];if(typeof r!="number")for(b=r=0;b<t.length;b++)r+=t[b].length;for(var i=new a(r),_=0,b=0;b<t.length;b++){var C=t[b];C.copy(i,_),_+=C.length}return i},a.prototype.write=function(t,r,i,_){isFinite(r)?isFinite(i)||(_=i,i=void 0):(K=_,_=r,r=i,i=K),r=Number(r)||0;var b,C,P,q,K=this.length-r;switch((!i||K<(i=Number(i)))&&(i=K),_=String(_||"utf8").toLowerCase()){case"hex":b=function(Q,z,J,R){J=Number(J)||0;var W=Q.length-J;(!R||W<(R=Number(R)))&&(R=W),x((W=z.length)%2==0,"Invalid hex string"),W/2<R&&(R=W/2);for(var Z=0;Z<R;Z++){var at=parseInt(z.substr(2*Z,2),16);x(!isNaN(at),"Invalid hex string"),Q[J+Z]=at}return a._charsWritten=2*Z,Z}(this,t,r,i);break;case"utf8":case"utf-8":C=this,P=r,q=i,b=a._charsWritten=tt(X(t),C,P,q);break;case"ascii":case"binary":b=y(this,t,r,i);break;case"base64":C=this,P=r,q=i,b=a._charsWritten=tt(ot(t),C,P,q);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":b=E(this,t,r,i);break;default:throw new Error("Unknown encoding")}return b},a.prototype.toString=function(t,r,i){var _,b,C,P,q=this;if(t=String(t||"utf8").toLowerCase(),r=Number(r)||0,(i=i!==void 0?Number(i):q.length)===r)return"";switch(t){case"hex":_=function(K,Q,z){var J=K.length;(!Q||Q<0)&&(Q=0),(!z||z<0||J<z)&&(z=J);for(var R="",W=Q;W<z;W++)R+=H(K[W]);return R}(q,r,i);break;case"utf8":case"utf-8":_=function(K,Q,z){var J="",R="";z=Math.min(K.length,z);for(var W=Q;W<z;W++)K[W]<=127?(J+=it(R)+String.fromCharCode(K[W]),R=""):R+="%"+K[W].toString(16);return J+it(R)}(q,r,i);break;case"ascii":case"binary":_=B(q,r,i);break;case"base64":b=q,P=i,_=(C=r)===0&&P===b.length?m.fromByteArray(b):m.fromByteArray(b.slice(C,P));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":_=function(K,Q,z){for(var J=K.slice(Q,z),R="",W=0;W<J.length;W+=2)R+=String.fromCharCode(J[W]+256*J[W+1]);return R}(q,r,i);break;default:throw new Error("Unknown encoding")}return _},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.copy=function(t,r,i,_){if(r=r||0,(_=_||_===0?_:this.length)!==(i=i||0)&&t.length!==0&&this.length!==0){x(i<=_,"sourceEnd < sourceStart"),x(0<=r&&r<t.length,"targetStart out of bounds"),x(0<=i&&i<this.length,"sourceStart out of bounds"),x(0<=_&&_<=this.length,"sourceEnd out of bounds"),_>this.length&&(_=this.length);var b=(_=t.length-r<_-i?t.length-r+i:_)-i;if(b<100||!a._useTypedArrays)for(var C=0;C<b;C++)t[C+r]=this[C+i];else t._set(this.subarray(i,i+b),r)}},a.prototype.slice=function(t,r){var i=this.length;if(t=O(t,i,0),r=O(r,i,i),a._useTypedArrays)return a._augment(this.subarray(t,r));for(var _=r-t,b=new a(_,void 0,!0),C=0;C<_;C++)b[C]=this[C+t];return b},a.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},a.prototype.set=function(t,r){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,r)},a.prototype.readUInt8=function(t,r){if(r||(x(t!=null,"missing offset"),x(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return this[t]},a.prototype.readUInt16LE=function(t,r){return A(this,t,!0,r)},a.prototype.readUInt16BE=function(t,r){return A(this,t,!1,r)},a.prototype.readUInt32LE=function(t,r){return T(this,t,!0,r)},a.prototype.readUInt32BE=function(t,r){return T(this,t,!1,r)},a.prototype.readInt8=function(t,r){if(r||(x(t!=null,"missing offset"),x(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return 128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,r){return s(this,t,!0,r)},a.prototype.readInt16BE=function(t,r){return s(this,t,!1,r)},a.prototype.readInt32LE=function(t,r){return f(this,t,!0,r)},a.prototype.readInt32BE=function(t,r){return f(this,t,!1,r)},a.prototype.readFloatLE=function(t,r){return n(this,t,!0,r)},a.prototype.readFloatBE=function(t,r){return n(this,t,!1,r)},a.prototype.readDoubleLE=function(t,r){return o(this,t,!0,r)},a.prototype.readDoubleBE=function(t,r){return o(this,t,!1,r)},a.prototype.writeUInt8=function(t,r,i){i||(x(t!=null,"missing value"),x(r!=null,"missing offset"),x(r<this.length,"trying to write beyond buffer length"),nt(t,255)),r>=this.length||(this[r]=t)},a.prototype.writeUInt16LE=function(t,r,i){e(this,t,r,!0,i)},a.prototype.writeUInt16BE=function(t,r,i){e(this,t,r,!1,i)},a.prototype.writeUInt32LE=function(t,r,i){u(this,t,r,!0,i)},a.prototype.writeUInt32BE=function(t,r,i){u(this,t,r,!1,i)},a.prototype.writeInt8=function(t,r,i){i||(x(t!=null,"missing value"),x(r!=null,"missing offset"),x(r<this.length,"Trying to write beyond buffer length"),rt(t,127,-128)),r>=this.length||(0<=t?this.writeUInt8(t,r,i):this.writeUInt8(255+t+1,r,i))},a.prototype.writeInt16LE=function(t,r,i){l(this,t,r,!0,i)},a.prototype.writeInt16BE=function(t,r,i){l(this,t,r,!1,i)},a.prototype.writeInt32LE=function(t,r,i){Y(this,t,r,!0,i)},a.prototype.writeInt32BE=function(t,r,i){Y(this,t,r,!1,i)},a.prototype.writeFloatLE=function(t,r,i){F(this,t,r,!0,i)},a.prototype.writeFloatBE=function(t,r,i){F(this,t,r,!1,i)},a.prototype.writeDoubleLE=function(t,r,i){D(this,t,r,!0,i)},a.prototype.writeDoubleBE=function(t,r,i){D(this,t,r,!1,i)},a.prototype.fill=function(t,r,i){if(r=r||0,i=i||this.length,x(typeof(t=typeof(t=t||0)=="string"?t.charCodeAt(0):t)=="number"&&!isNaN(t),"value is not a number"),x(r<=i,"end < start"),i!==r&&this.length!==0){x(0<=r&&r<this.length,"start out of bounds"),x(0<=i&&i<=this.length,"end out of bounds");for(var _=r;_<i;_++)this[_]=t}},a.prototype.inspect=function(){for(var t=[],r=this.length,i=0;i<r;i++)if(t[i]=H(this[i]),i===g.INSPECT_MAX_BYTES){t[i+1]="...";break}return"<Buffer "+t.join(" ")+">"},a.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(a._useTypedArrays)return new a(this).buffer;for(var t=new Uint8Array(this.length),r=0,i=t.length;r<i;r+=1)t[r]=this[r];return t.buffer};var M=a.prototype;function O(t,r,i){return typeof t!="number"?i:r<=(t=~~t)?r:0<=t||0<=(t+=r)?t:0}function G(t){return(t=~~Math.ceil(+t))<0?0:t}function V(t){return(Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"})(t)}function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function X(t){for(var r=[],i=0;i<t.length;i++){var _=t.charCodeAt(i);if(_<=127)r.push(t.charCodeAt(i));else for(var b=i,C=(55296<=_&&_<=57343&&i++,encodeURIComponent(t.slice(b,i+1)).substr(1).split("%")),P=0;P<C.length;P++)r.push(parseInt(C[P],16))}return r}function ot(t){return m.toByteArray(t)}function tt(t,r,i,_){for(var b=0;b<_&&!(b+i>=r.length||b>=t.length);b++)r[b+i]=t[b];return b}function it(t){try{return decodeURIComponent(t)}catch(r){return String.fromCharCode(65533)}}function nt(t,r){x(typeof t=="number","cannot write a non-number as a number"),x(0<=t,"specified a negative value for writing an unsigned value"),x(t<=r,"value is larger than maximum value for type"),x(Math.floor(t)===t,"value has a fractional component")}function rt(t,r,i){x(typeof t=="number","cannot write a non-number as a number"),x(t<=r,"value larger than maximum allowed value"),x(i<=t,"value smaller than minimum allowed value"),x(Math.floor(t)===t,"value has a fractional component")}function st(t,r,i){x(typeof t=="number","cannot write a non-number as a number"),x(t<=r,"value larger than maximum allowed value"),x(i<=t,"value smaller than minimum allowed value")}function x(t,r){if(!t)throw new Error(r||"Failed assertion")}a._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=M.get,t.set=M.set,t.write=M.write,t.toString=M.toString,t.toLocaleString=M.toString,t.toJSON=M.toJSON,t.copy=M.copy,t.slice=M.slice,t.readUInt8=M.readUInt8,t.readUInt16LE=M.readUInt16LE,t.readUInt16BE=M.readUInt16BE,t.readUInt32LE=M.readUInt32LE,t.readUInt32BE=M.readUInt32BE,t.readInt8=M.readInt8,t.readInt16LE=M.readInt16LE,t.readInt16BE=M.readInt16BE,t.readInt32LE=M.readInt32LE,t.readInt32BE=M.readInt32BE,t.readFloatLE=M.readFloatLE,t.readFloatBE=M.readFloatBE,t.readDoubleLE=M.readDoubleLE,t.readDoubleBE=M.readDoubleBE,t.writeUInt8=M.writeUInt8,t.writeUInt16LE=M.writeUInt16LE,t.writeUInt16BE=M.writeUInt16BE,t.writeUInt32LE=M.writeUInt32LE,t.writeUInt32BE=M.writeUInt32BE,t.writeInt8=M.writeInt8,t.writeInt16LE=M.writeInt16LE,t.writeInt16BE=M.writeInt16BE,t.writeInt32LE=M.writeInt32LE,t.writeInt32BE=M.writeInt32BE,t.writeFloatLE=M.writeFloatLE,t.writeFloatBE=M.writeFloatBE,t.writeDoubleLE=M.writeDoubleLE,t.writeDoubleBE=M.writeDoubleBE,t.fill=M.fill,t.inspect=M.inspect,t.toArrayBuffer=M.toArrayBuffer,t}}).call(this,c("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},c("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(c,d,g){(function(w,k,m,U,I,v,L,S,$){var m=c("buffer").Buffer,j=4,a=new m(j);a.fill(0),d.exports={hash:function(y,E,B,A){for(var T=E(function(e,u){e.length%j!=0&&(l=e.length+(j-e.length%j),e=m.concat([e,a],l));for(var l,Y=[],F=u?e.readInt32BE:e.readInt32LE,D=0;D<e.length;D+=j)Y.push(F.call(e,D));return Y}(y=m.isBuffer(y)?y:new m(y),A),8*y.length),E=A,s=new m(B),f=E?s.writeInt32BE:s.writeInt32LE,n=0;n<T.length;n++)f.call(s,T[n],4*n,!0);return s}}}).call(this,c("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},c("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(c,d,g){(function(w,k,m,U,I,v,L,S,$){var m=c("buffer").Buffer,j=c("./sha"),a=c("./sha256"),y=c("./rng"),E={sha1:j,sha256:a,md5:c("./md5")},B=64,A=new m(B);function T(e,u){var l=E[e=e||"sha1"],Y=[];return l||s("algorithm:",e,"is not yet supported"),{update:function(F){return m.isBuffer(F)||(F=new m(F)),Y.push(F),F.length,this},digest:function(F){var D=m.concat(Y),D=u?function(M,O,G){m.isBuffer(O)||(O=new m(O)),m.isBuffer(G)||(G=new m(G)),O.length>B?O=M(O):O.length<B&&(O=m.concat([O,A],B));for(var V=new m(B),H=new m(B),X=0;X<B;X++)V[X]=54^O[X],H[X]=92^O[X];return G=M(m.concat([V,G])),M(m.concat([H,G]))}(l,u,D):l(D);return Y=null,F?D.toString(F):D}}}function s(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}A.fill(0),g.createHash=function(e){return T(e)},g.createHmac=T,g.randomBytes=function(e,u){if(!u||!u.call)return new m(y(e));try{u.call(this,void 0,new m(y(e)))}catch(l){u(l)}};var f,n=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],o=function(e){g[e]=function(){s("sorry,",e,"is not implemented yet")}};for(f in n)o(n[f])}).call(this,c("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},c("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(c,d,g){(function(w,k,N,U,I,v,L,S,$){var m=c("./helpers");function j(s,f){s[f>>5]|=128<<f%32,s[14+(f+64>>>9<<4)]=f;for(var n=1732584193,o=-271733879,e=-1732584194,u=271733878,l=0;l<s.length;l+=16){var Y=n,F=o,D=e,M=u,n=y(n,o,e,u,s[l+0],7,-680876936),u=y(u,n,o,e,s[l+1],12,-389564586),e=y(e,u,n,o,s[l+2],17,606105819),o=y(o,e,u,n,s[l+3],22,-1044525330);n=y(n,o,e,u,s[l+4],7,-176418897),u=y(u,n,o,e,s[l+5],12,1200080426),e=y(e,u,n,o,s[l+6],17,-1473231341),o=y(o,e,u,n,s[l+7],22,-45705983),n=y(n,o,e,u,s[l+8],7,1770035416),u=y(u,n,o,e,s[l+9],12,-1958414417),e=y(e,u,n,o,s[l+10],17,-42063),o=y(o,e,u,n,s[l+11],22,-1990404162),n=y(n,o,e,u,s[l+12],7,1804603682),u=y(u,n,o,e,s[l+13],12,-40341101),e=y(e,u,n,o,s[l+14],17,-1502002290),n=E(n,o=y(o,e,u,n,s[l+15],22,1236535329),e,u,s[l+1],5,-165796510),u=E(u,n,o,e,s[l+6],9,-1069501632),e=E(e,u,n,o,s[l+11],14,643717713),o=E(o,e,u,n,s[l+0],20,-373897302),n=E(n,o,e,u,s[l+5],5,-701558691),u=E(u,n,o,e,s[l+10],9,38016083),e=E(e,u,n,o,s[l+15],14,-660478335),o=E(o,e,u,n,s[l+4],20,-405537848),n=E(n,o,e,u,s[l+9],5,568446438),u=E(u,n,o,e,s[l+14],9,-1019803690),e=E(e,u,n,o,s[l+3],14,-187363961),o=E(o,e,u,n,s[l+8],20,1163531501),n=E(n,o,e,u,s[l+13],5,-1444681467),u=E(u,n,o,e,s[l+2],9,-51403784),e=E(e,u,n,o,s[l+7],14,1735328473),n=B(n,o=E(o,e,u,n,s[l+12],20,-1926607734),e,u,s[l+5],4,-378558),u=B(u,n,o,e,s[l+8],11,-2022574463),e=B(e,u,n,o,s[l+11],16,1839030562),o=B(o,e,u,n,s[l+14],23,-35309556),n=B(n,o,e,u,s[l+1],4,-1530992060),u=B(u,n,o,e,s[l+4],11,1272893353),e=B(e,u,n,o,s[l+7],16,-155497632),o=B(o,e,u,n,s[l+10],23,-1094730640),n=B(n,o,e,u,s[l+13],4,681279174),u=B(u,n,o,e,s[l+0],11,-358537222),e=B(e,u,n,o,s[l+3],16,-722521979),o=B(o,e,u,n,s[l+6],23,76029189),n=B(n,o,e,u,s[l+9],4,-640364487),u=B(u,n,o,e,s[l+12],11,-421815835),e=B(e,u,n,o,s[l+15],16,530742520),n=A(n,o=B(o,e,u,n,s[l+2],23,-995338651),e,u,s[l+0],6,-198630844),u=A(u,n,o,e,s[l+7],10,1126891415),e=A(e,u,n,o,s[l+14],15,-1416354905),o=A(o,e,u,n,s[l+5],21,-57434055),n=A(n,o,e,u,s[l+12],6,1700485571),u=A(u,n,o,e,s[l+3],10,-1894986606),e=A(e,u,n,o,s[l+10],15,-1051523),o=A(o,e,u,n,s[l+1],21,-2054922799),n=A(n,o,e,u,s[l+8],6,1873313359),u=A(u,n,o,e,s[l+15],10,-30611744),e=A(e,u,n,o,s[l+6],15,-1560198380),o=A(o,e,u,n,s[l+13],21,1309151649),n=A(n,o,e,u,s[l+4],6,-145523070),u=A(u,n,o,e,s[l+11],10,-1120210379),e=A(e,u,n,o,s[l+2],15,718787259),o=A(o,e,u,n,s[l+9],21,-343485551),n=T(n,Y),o=T(o,F),e=T(e,D),u=T(u,M)}return Array(n,o,e,u)}function a(s,f,n,o,e,u){return T((f=T(T(f,s),T(o,u)))<<e|f>>>32-e,n)}function y(s,f,n,o,e,u,l){return a(f&n|~f&o,s,f,e,u,l)}function E(s,f,n,o,e,u,l){return a(f&o|n&~o,s,f,e,u,l)}function B(s,f,n,o,e,u,l){return a(f^n^o,s,f,e,u,l)}function A(s,f,n,o,e,u,l){return a(n^(f|~o),s,f,e,u,l)}function T(s,f){var n=(65535&s)+(65535&f);return(s>>16)+(f>>16)+(n>>16)<<16|65535&n}d.exports=function(s){return m.hash(s,j,16)}}).call(this,c("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},c("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(c,d,g){(function(w,k,N,U,I,v,L,S,$){d.exports=function(m){for(var j,a=new Array(m),y=0;y<m;y++)(3&y)==0&&(j=4294967296*Math.random()),a[y]=j>>>((3&y)<<3)&255;return a}}).call(this,c("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},c("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(c,d,g){(function(w,k,N,U,I,v,L,S,$){var m=c("./helpers");function j(E,B){E[B>>5]|=128<<24-B%32,E[15+(B+64>>9<<4)]=B;for(var A,T,s,f=Array(80),n=1732584193,o=-271733879,e=-1732584194,u=271733878,l=-1009589776,Y=0;Y<E.length;Y+=16){for(var F=n,D=o,M=e,O=u,G=l,V=0;V<80;V++){f[V]=V<16?E[Y+V]:y(f[V-3]^f[V-8]^f[V-14]^f[V-16],1);var H=a(a(y(n,5),(H=o,T=e,s=u,(A=V)<20?H&T|~H&s:!(A<40)&&A<60?H&T|H&s|T&s:H^T^s)),a(a(l,f[V]),(A=V)<20?1518500249:A<40?1859775393:A<60?-1894007588:-899497514)),l=u,u=e,e=y(o,30),o=n,n=H}n=a(n,F),o=a(o,D),e=a(e,M),u=a(u,O),l=a(l,G)}return Array(n,o,e,u,l)}function a(E,B){var A=(65535&E)+(65535&B);return(E>>16)+(B>>16)+(A>>16)<<16|65535&A}function y(E,B){return E<<B|E>>>32-B}d.exports=function(E){return m.hash(E,j,20,!0)}}).call(this,c("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},c("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(c,d,g){(function(w,k,N,U,I,v,L,S,$){function m(B,A){var T=(65535&B)+(65535&A);return(B>>16)+(A>>16)+(T>>16)<<16|65535&T}function j(B,A){var T,s=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),f=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),n=new Array(64);B[A>>5]|=128<<24-A%32,B[15+(A+64>>9<<4)]=A;for(var o,e,u=0;u<B.length;u+=16){for(var l=f[0],Y=f[1],F=f[2],D=f[3],M=f[4],O=f[5],G=f[6],V=f[7],H=0;H<64;H++)n[H]=H<16?B[H+u]:m(m(m((e=n[H-2],y(e,17)^y(e,19)^E(e,10)),n[H-7]),(e=n[H-15],y(e,7)^y(e,18)^E(e,3))),n[H-16]),T=m(m(m(m(V,y(e=M,6)^y(e,11)^y(e,25)),M&O^~M&G),s[H]),n[H]),o=m(y(o=l,2)^y(o,13)^y(o,22),l&Y^l&F^Y&F),V=G,G=O,O=M,M=m(D,T),D=F,F=Y,Y=l,l=m(T,o);f[0]=m(l,f[0]),f[1]=m(Y,f[1]),f[2]=m(F,f[2]),f[3]=m(D,f[3]),f[4]=m(M,f[4]),f[5]=m(O,f[5]),f[6]=m(G,f[6]),f[7]=m(V,f[7])}return f}var a=c("./helpers"),y=function(B,A){return B>>>A|B<<32-A},E=function(B,A){return B>>>A};d.exports=function(B){return a.hash(B,j,32,!0)}}).call(this,c("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},c("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(c,d,g){(function(w,k,N,U,I,v,L,S,$){g.read=function(m,j,a,y,u){var B,A,T=8*u-y-1,s=(1<<T)-1,f=s>>1,n=-7,o=a?u-1:0,e=a?-1:1,u=m[j+o];for(o+=e,B=u&(1<<-n)-1,u>>=-n,n+=T;0<n;B=256*B+m[j+o],o+=e,n-=8);for(A=B&(1<<-n)-1,B>>=-n,n+=y;0<n;A=256*A+m[j+o],o+=e,n-=8);if(B===0)B=1-f;else{if(B===s)return A?NaN:1/0*(u?-1:1);A+=Math.pow(2,y),B-=f}return(u?-1:1)*A*Math.pow(2,B-y)},g.write=function(m,j,a,y,E,l){var A,T,s=8*l-E-1,f=(1<<s)-1,n=f>>1,o=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,e=y?0:l-1,u=y?1:-1,l=j<0||j===0&&1/j<0?1:0;for(j=Math.abs(j),isNaN(j)||j===1/0?(T=isNaN(j)?1:0,A=f):(A=Math.floor(Math.log(j)/Math.LN2),j*(y=Math.pow(2,-A))<1&&(A--,y*=2),2<=(j+=1<=A+n?o/y:o*Math.pow(2,1-n))*y&&(A++,y/=2),f<=A+n?(T=0,A=f):1<=A+n?(T=(j*y-1)*Math.pow(2,E),A+=n):(T=j*Math.pow(2,n-1)*Math.pow(2,E),A=0));8<=E;m[a+e]=255&T,e+=u,T/=256,E-=8);for(A=A<<E|T,s+=E;0<s;m[a+e]=255&A,e+=u,A/=256,s-=8);m[a+e-u]|=128*l}}).call(this,c("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},c("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(c,d,g){(function(w,k,N,U,I,v,L,S,$){var m,j,a;function y(){}(w=d.exports={}).nextTick=(j=typeof window<"u"&&window.setImmediate,a=typeof window<"u"&&window.postMessage&&window.addEventListener,j?function(E){return window.setImmediate(E)}:a?(m=[],window.addEventListener("message",function(E){var B=E.source;B!==window&&B!==null||E.data!=="process-tick"||(E.stopPropagation(),0<m.length&&m.shift()())},!0),function(E){m.push(E),window.postMessage("process-tick","*")}):function(E){setTimeout(E,0)}),w.title="browser",w.browser=!0,w.env={},w.argv=[],w.on=y,w.addListener=y,w.once=y,w.off=y,w.removeListener=y,w.removeAllListeners=y,w.emit=y,w.binding=function(E){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(E){throw new Error("process.chdir is not supported")}}).call(this,c("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},c("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(ut);const ct=ut.exports,lt={name:"dsParse",version:1,actions:{toWidget:{name:"toWidget",title:"Convert HTML to dsWidgets",params:{id:"string",rootElement:"object"}}},dependencies:[{name:"dsUtilities",version:1}],data:{components:{}},methods:{getTemplateLayoutIds({template:p,sectionId:h}){let c=[];for(let d=0;d<p[h].layouts.length;d++){const g=p[h].layouts[d];c.push(g)}for(let d=0;d<p[h].content.length;d++){const g=p[h].content,w=g[d].type;for(let k=0;k<w.length;k++)if(w[k][0]==="section")for(let N=0;N<g[d].value[k].length;N++){const U=g[d].value[k][N][1];c=c.concat(this.getTemplateLayoutIds({template:p,sectionId:U}))}}return c},createModifier({baseLayoutIds:p,baseLayouts:h,modifierLayoutIds:c,modifierLayouts:d}){const g={};for(let w=0;w<c.length;w++){const k=p[w],N=c[w];if(N!==k){g[k]={};for(let U=0;U<h[k].length;U++){const I=h[k][U],v=d[N][U];I.componentId!==v.componentId&&(g[k][U]=v.componentId)}}}return g},_baseWidget(p,h={}){const c={metadata:h,widgets:{sections:{},content:{}},content:{value:{},type:{},used:{}},layouts:{items:{},head:{}},components:{}};return p&&(delete c.widgets,c.template={}),c},_checkCondition(p,h){const c=[];for(let d=0;d<h.length;d++){const g=h[d];let w=!0;Object.hasOwnProperty.call(p,g)||(w=!1),c.push(w)}return c},_traverse(p,h,c=[],d=[],g=[],w,k=!0){let N;for(let U=0;U<h.length;U++)if(p[h[U]]){N=h[U];break}if(N)if(Array.isArray(p[N])){const U=p[N];for(let I=0;I<U.length;I++){const v=U[I];if(k?(g[I]=1,w=I):g[w]+=1,Array.isArray(v)){let L=[];for(let S=0;S<v.length;S++){const $=v[S];L=this._checkCondition($,c),L.includes(!0)&&(d.unshift($),this._traverse($,h,c,d,g,w,!1))}}else if(typeof v=="object"&&this._checkCondition(v,c).includes(!0)){let L;for(let S=0;S<h.length;S++)if(v[h[S]]){L=h[S];break}if(Array.isArray(v[L]))for(let S=0;S<v[L].length;S++){const $=v[L][S];this._checkCondition($,c).includes(!0)&&(d.unshift($),this._traverse($,h,c,d,g,w,!1))}else d.unshift(v),this._traverse(v,h,c,d,g,w,!1)}}}else{const U=p[N];this._checkCondition(U,c).includes(!0)&&(k||(g[w]+=1),d.unshift(U),this._traverse(U,h,c,d,g,w,!1))}return d.length||d.unshift(p),{list:d,head:g}},_toParam(p,h,c,d=[]){const g={};let w;if(p.params&&(p._$computedParams||p.values)){const U=this._traverse(p,h,c);w=U.head;for(let I=0;I<U.list.length;I++){const v=U.list[I];if(I!==0&&(v.params.params&&v._$computed||v._$computedParams||v.values)){const S=I-1;if(v.paramType==="object"||v.paramType==="array")for(let $=0;$<v.params.length;$++)v.params[$].length>1?v.params[$][1]={_$id:d[S]}:v.params[$]={_$id:d[S]};else v.params={_$id:d[S]}}const L=this._createHash(v);d.push(L),g[L]=v}}const k={...p};let N;for(let U=0;U<h.length;U++)if(k[h[U]]){N=h[U];break}if(Array.isArray(k[N])){let U=1;for(let I=0;I<k[N].length;I++)if(Array.isArray(k[N][I]))for(let v=0;v<k[N][I].length;v++)typeof k[N][I][v]=="object"&&(I>0&&(U=U+w[I-1]),k[N][I][v]={_$id:d[d.length-U]});else typeof k[N][I]=="object"&&(I>0&&(U=U+w[I-1]),k[N][I]={_$id:d[d.length-U]})}else k.params={_$id:d[d.length-1]};return{item:k,params:g}},toActionSequence(p){let h,c;p.actions&&(h=this._toAction(p.actions)),p.conditions&&(c=this._toAction(p.conditions));const d={params:{},dsActionSequence:{}};return h&&(d.dsActionItems=h.actions,d.params=h.params,d.dsActionSequence.actions=h.sequence),c&&(d.dsActionConditions=c.actions,d.params={...d.params,...c.params},d.dsActionSequence.conditions=h.sequence),d.dsActionSequence.id=this._createHash(d.dsActionSequence),d},_toAction(p,h={},c={},d=0,g={}){const w=[];for(let k=0;k<p.length;k++){const N=p[k],{item:U,params:I}=this._toParam(N,["params","values"],["_$computedParams","_$computed"]);delete U.onSuccess,delete U.onError;const v=this._createHash(U),L={_$id:v},S=`_${k}${d}`;if(h[v]=U,c={...c,...I},w.push(S),N.onSuccess){const $=this._toAction(N.onSuccess,h,c,++d,g);L.onSuccess=$.entries}if(N.onError){const $=this._toAction(N.onError,h,c,++d,g);L.onError=$.entries}g[S]=L,d===0&&(g.entry=w)}return{actions:h,params:c,sequence:g,entries:w}},toWidget({data:p,sectionId:h=this.$method("dsUtilities/generateId"),groupId:c=this.$method("dsUtilities/generateId"),rootElement:d,view:g="default",isTemplate:w,isHead:k=!0,metadata:N}){p||(p=this._baseWidget(w,N));let U=!1,I=d.childNodes||[];k?p.templateEntry=h:p.childSectionId=h,d.getAttribute instanceof Function&&(U=!!d.getAttribute("ds-widget-section")||!!d.getAttribute("ds-widget")),U?(d.removeAttribute("ds-widget"),I=[d]):c=this.$method("dsUtilities/generateId");const v=this.$method("dsUtilities/generateId"),L=this._toLayout(p,h,v,c,I,[],g==="default",w,g);if(!w)return p.widgets.sections[h]||(p.widgets.sections[h]=[]),p.widgets.sections[h].push({groupId:c,instanceId:v,layout:{[g]:L.id}}),p.widgets.content[h+v+"_"+g]=p.content.used[v],p;p.template[h]||(p.template[h]={events:{},layouts:[],content:{}});const S=p.template[h],$=S.layouts.length;Object.values(L.events).length&&(S.events[$]=L.events),S.layouts.push(L.id);const m=p.content.used[v]||[];for(let j=0;j<m.length;j++){const a=m[j];S.content[$]||(S.content[$]=[]),S.content[$].push({value:p.content.value[a],type:p.content.type[a]})}return p},_toLayout(p,h,c,d,g,w=[],k,N,U,I=[],v=!0,L=0){const S=[];let $={},m=[];for(let j=0;j<g.length;j++){const a=g[j];if(a.tagName||a.constructor.name==="Text"&&a.textContent.trim()){const y=this._toComponent(p,h,c,d,a,k,N,U),E={componentId:y.id};if(y.hasContent){const A=p.content.used[c]&&p.content.used[c].length;E.contentIndex=A-1}y.events&&($[L]=y.events),v&&S.push(m.length);const B=w.indexOf(a.parentElement);if(B>-1&&(E.parentIndex=B),w.push(a),m.push(E),++L,a.tagName&&a.hasAttribute("ds-widget-section")){const A=this.$method("dsUtilities/generateId");I.push({sectionId:A,contentIndex:E.contentIndex});for(let T=0;T<a.children.length;T++){const s=a.children[T];s.tagName&&!s.hasAttribute("ds-widget-section")&&s.setAttribute("ds-widget","true"),this.toWidget({data:p,sectionId:A,groupId:d,rootElement:s,isTemplate:N,view:U,isHead:!1})}}else if(a.childNodes.length&&!y.hasWidget&&y.hasChildren){const A=this._toLayout(p,h,c,d,a.childNodes,w,k,N,U,I,!1,L);I=I.concat(A.instances),L=A.index,m=m.concat(A.items),$={...$,...A.events}}}}if(v){for(let a=0;a<I.length;a++){const y=I[a],E=p.content.used[c][y.contentIndex];let B={default:y.sectionId};N&&(B=[["default",y.sectionId]]),p.content.value[E]=B}for(let a=0;a<m.length;a++){const y=m[a];if(Object.prototype.hasOwnProperty.call(y,"parentIndex")){const E=y.parentIndex;Object.prototype.hasOwnProperty.call(m[E],"children")?m[E].children.push(a):m[E].children=[a]}}const j=this._createHash(m);return p.layouts.items[j]=m,S.length>1&&(p.layouts.head[j]=S),{items:m,head:S,id:j,sectionId:h,events:$,index:L}}return{items:m,head:S,sectionId:h,instances:I,events:$,index:L}},_elementKey(p){const h=p.split("-");h.shift();const c=h.length-1;return h[c]?h:null},_toElement(p,h,c,d){const g=this.$method("dsUtilities/generateId"),w={metadata:{},value:{},attributes:{}};p.content.used[h]||(p.content.used[h]=[]);for(let N=0;N<c.length;N++){const[U,I]=c[N],v=this._elementKey(U);if(v)if(v.length===3){const L=g+"/"+v[1];w[v[0]][L]||(w[v[0]][L]={}),w[v[0]][L][v[1]]=I}else v.length===2?(w[v[0]]||(w[v[0]]={}),v[0]==="metadata"?w[v[0]][v[1]]=[I,d]:w[v[0]][v[1]]=I):(w[v[0]]||(w[v[0]]={}),w[v[0]]=I)}p.content.used[h].push(g),p.content.value[g]={default:w.value},p.content.type[g]=w.metadata.type;const k=this.$method("dsMetadata/getLanguage");k!=="default"&&(p.content.value[g][k]=w.value)},_createHash(p){let h=ct(p,{algorithm:"md5",encoding:"base64"}),c="";h=h.substring(0,h.length-2);for(let d=0;d<h.length;d++){const g=h[d];g==="+"?c+="$":g==="/"?c+="_":c+=g}return"_"+c},_elementContent(p,h){const c=this.$component(p),d=[];if(c&&c.get){let g;if(c.get.type)g=this[`_setNodeValueBy/${c.get.type}`](h,c.get.value);else for(let w=0;w<c.get.length;w++){const k=c.get[w];g=this[`_setNodeValueBy/${k.type}`](h,k.value)}d.push(["ds-metadata-type",c.type]),d.push(["ds-value",g])}return d},"_setNodeValueBy/attribute"(p,h){if(typeof h=="string")return p.getAttribute(h);const c={};for(let d=0;d<h.length;d++){const{name:g,key:w}=h[d];c[w]=p.getAttribute(g)}return c},"_setNodeValueBy/getter"(p,h){if(typeof h=="string")return p.__lookupGetter__(h)?p[h]:"";{const c={};for(let d=0;d<h.length;d++){const{name:g,key:w}=h[d];p.__lookupGetter__(h)?c[w]=p[g]:c[w]=""}return c}},_parseText(p){if(p==="[empty]")return{text:"",token:!1};const h=/\[(.+)\]/,c=new RegExp(h,"g").test(p);return{text:p,token:c}},_toComponent(p,h,c,d,g,w,k,N){const U={attributes:{}},I=g.attributes||{};let v={},L=[],S=!1,$=!1,m=!1,j=!!g.childNodes.length;if(g.tagName){const a=g.tagName.toLowerCase(),y=this._elementContent(a,g);U.id=a,y.length&&(L=L.concat(y),$=!0)}else{const a=this._parseText(g.textContent);$=!0,U.id="text",L.push(["ds-metadata-type","text"]),L.push(["ds-value",a])}if(I.constructor.name==="NamedNodeMap")for(let a=0;a<I.length;a++){const y=I[a],[E,B]=this._attachAttribute(p,y.name,y.value,$,m,j,S,g,a);E.event&&(v={...v,...E.event}),$=E.hasContent,m=E.hasWidget,j=E.hasChildren,S=E.hasAttributes,U.attributes={...U.attributes,...E.attributes},L=[...L,...E.setAttributes],a=B}if(m==="ds-widget"){g.removeAttribute("ds-widget");const a=this.toWidget({data:p,rootElement:g,groupId:d,isTemporary:w,isTemplate:k,view:N,isHead:!1});L.push(["ds-metadata-type","section"]),L.push(["ds-value",{default:a.childSectionId}])}return L.length&&this._toElement(p,c,L,w),S||delete U.attributes,{id:this._addComponent(p,U),hasContent:$,hasWidget:m,hasChildren:j,events:v}},_kebabToCamelCase(p){return p.replace(/-./g,h=>h[1].toUpperCase())},_attachAttribute(p,h,c,d,g,w,k,N,U){const I={hasContent:d,hasWidget:g,hasChildren:w,hasAttributes:k,attributes:{},setAttributes:[]};if(h.startsWith("@")){let v=c.split(" ");if(p.metadata.actions){if(v=v.map(S=>p.metadata.actions[S]||S),!v.length)throw Error("dsTemplate: Could not find a matching action")}else throw Error("dsTemplate: No actions defined in template script");let L=h.split("ns");return L.length>1?L=L[0].substring(1).substring(0,L[0].length-2)+"/"+L[1].substring(1):L=L[0].substring(1),I.event={[this._kebabToCamelCase(L)]:v},--U,N.removeAttribute(h),[I,U]}return h==="ds-content-html"?(d||(I.setAttributes.push(["ds-metadata-type","html"]),I.setAttributes.push(["ds-value",N.innerHTML]),I.hasContent=!0,I.hasChildren=!1),--U,N.removeAttribute(h),[I,U]):h==="ds-widget"?(d||(I.hasWidget=h,I.hasContent=!0),[I,U]):h==="ds-widget-section"?(d||(I.setAttributes.push(["ds-metadata-type","section"]),I.setAttributes.push(["ds-value",""]),I.hasWidget=h,I.hasContent=!0),[I,U]):(h==="class"?I.attributes[h]=this._sortClassName(c):I.attributes[h]=c,I.hasAttributes=!0,[I,U])},_addComponent(p,h){const c=this._createHash(h);return this.components[c]||(p.components[c]=h),c},_sortClassName(p){return p.split(" ").sort().join(" ")}}};export{lt as default};
//# sourceMappingURL=ds-plugin-parse.9f9c58d8.7a166e1d.js.map
