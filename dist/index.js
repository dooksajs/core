!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.DsPlugins=t():e.DsPlugins=t()}(this,(function(){return function(){"use strict";var e={866:function(e,t,r){function n(e){var t=e.id,r=e.async,n=e.crossorigin,i=e.defer,o=e.integrity,s=e.nonce,c=e.referrerpolicy,a=e.src,u=e.type,h=void 0===u?"text/javascript":u,f=e.nomodule,d=e.customParams,p=void 0===d?[]:d,l=e.apiVars;this.queue=[],this.loaded=!1,this.id="ds__".concat(t),this.async=r,this.crossorigin=n,this.defer=i,this.integrity=o,this.nonce=s,this.referrerpolicy=c,this.src=a,this.type=h,this.nomodule=f,this.customParams=p,this.apiVars=l}r.d(t,{default:function(){return u}}),n.prototype.loading=function(){return Promise.all(this.queue)},n.prototype.load=function(e){var t=this,r=new Promise((function(r,n){var i=t.createUrl(e);t.setScript({url:i,resolve:r,reject:n})}));return this.queue.push(r),r},n.prototype.createUrl=function(e){for(var t,r=this.src,n=0;n<this.customParams.length;n++)t=this.customParams[n],r=r.replace("".concat(t,"="),"".concat(t,"=").concat(e[t]));return r},n.prototype.setScript=function(e){var t=this,r=e.url,n=e.resolve,i=e.reject;if(!document.getElementById(this.id)){var o=document.createElement("script");o.id=this.id,o.type=this.type,o.src=r,o.onerror=function(){return i()},o.onload=function(){t.loaded=!0;var e={};if(t.apiVars)for(var r,i=0;i<t.apiVars.length;i++)e[r=t.apiVars[i]]=window[r];n(e)},this.async&&(o.async=this.async),this.crossorigin&&(o.crossorigin=this.crossorigin),this.defer&&(o.defer=this.defer),this.integrity&&(o.integrity=this.integrity),this.referrerpolicy&&(o.referrerpolicy=this.referrerpolicy),this.nomodule&&(o.nomodule=this.nomodule),this.nonce&&(o.nonce=this.nonce),document.head.appendChild(o)}};var i=n;function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){if(e=e({ScriptLoader:i}),this.name=e.name,this._context={name:e.name},e.data&&(this._context=s(s({},this._context),e.data)),e.setup){var t=e.setup.bind(this._context);this.setup=t}if(e.methods){var r={};for(var n in e.methods)if(Object.hasOwnProperty.call(e.methods,n)){var o=e.methods[n];this._context[n]=o,r[n]=o.bind(this._context)}this.methods=r}}a.prototype.action=function(e,t){try{if(this._methods[e])return this._methods[e](t);throw new Error("Method not found")}catch(t){console.error("".concat(e," failed: "),t.message)}},a.prototype.setup=function(){if(this._setup)return this._setup()};var u=function(e){return{_methods:{},queue:{},isLoaded:{},isLoading:function(e){return Promise.all(this.queue[e])},action:function(e,t,r){var n=this,i=e+"/"+t;if(this.isLoaded[e]){var o=this._methods[i](r);o instanceof Promise&&Promise.resolve(o).then((function(e){}))}else this.isLoading(e).then((function(){var e=n._methods[i](r);e instanceof Promise&&Promise.resolve(e).then((function(e){}))}))},create:function(e){return new a(e)},add:function(e){if(e.methods)for(var t in e.methods)if(Object.hasOwnProperty.call(e.methods,t)){var r=e.methods[t];this._methods["".concat(e.name,"/").concat(t)]=r}},fetch:function(e,t){var r=this,n=e.setup();n instanceof Promise?(this.queue[t].push(n),Promise.resolve(n).then((function(){r.isLoaded[t]=!0}))):this.isLoaded[t]=!0},setup:function(e,t){var r=this;return new Promise((function(n){(r.isLoaded[e]||r.queue[e])&&n();var i=function(e,t){if(basePlugins[e])return t&&basePlugins[e].items[t]?basePlugins[e].items[t].current:basePlugins[e]}(e,t);if(r.isLoaded[e]=!1,r.queue[e]=[],i.get){var o=new Promise((function(t,n){i.getPlugin().then((function(n){var i=r.create(n.current),o=r.fetch(i,e);r.add(i),r.queue[e].push(o),t()}))}));r.queue[e].push(o)}else{var s=r.create(i.current);if(s.dependencies){for(var c=[],a=0;a<s.dependencies.length;a++){var u=s.dependencies[a],h=u.name,f=u.version,d=r.setup(h,f);c.push(d)}Promise.all(c).then((function(){r.fetch(s,e),r.add(s),r.isLoading(e).then((function(){return n()}))}))}else r.fetch(s,e),r.add(s),r.isLoading(e).then((function(){return n()}))}}))}}}}},t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}return r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r(866)}().default}));